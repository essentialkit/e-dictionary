var IS_DEV_BUILD=false;
(()=>{var uo=Object.defineProperty;var jr=(t,e)=>{for(var n in e)uo(t,n,{get:e[n],enumerable:!0})};var zr=Object.prototype.toString;function ft(t){switch(zr.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return W(t,Error)}}function Ze(t,e){return zr.call(t)===`[object ${e}]`}function pt(t){return Ze(t,"ErrorEvent")}function At(t){return Ze(t,"DOMError")}function vn(t){return Ze(t,"DOMException")}function $(t){return Ze(t,"String")}function Je(t){return t===null||typeof t!="object"&&typeof t!="function"}function K(t){return Ze(t,"Object")}function Ke(t){return typeof Event<"u"&&W(t,Event)}function Tn(t){return typeof Element<"u"&&W(t,Element)}function Rn(t){return Ze(t,"RegExp")}function He(t){return Boolean(t&&t.then&&typeof t.then=="function")}function Nn(t){return K(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function Dn(t){return typeof t=="number"&&t!==t}function W(t,e){try{return t instanceof e}catch{return!1}}function Ct(t){return t&&t.Math==Math?t:void 0}var k=typeof globalThis=="object"&&Ct(globalThis)||typeof window=="object"&&Ct(window)||typeof self=="object"&&Ct(self)||typeof global=="object"&&Ct(global)||function(){return this}()||{};function Ee(){return k}function $e(t,e,n){let r=n||k,i=r.__SENTRY__=r.__SENTRY__||{};return i[t]||(i[t]=e())}var lo=Ee(),fo=80;function Qe(t,e={}){try{let n=t,r=5,i=[],o=0,s=0,a=" > ",c=a.length,u,d=Array.isArray(e)?e:e.keyAttrs,l=!Array.isArray(e)&&e.maxStringLength||fo;for(;n&&o++<r&&(u=po(n,d),!(u==="html"||o>1&&s+i.length*c+u.length>=l));)i.push(u),s+=u.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function po(t,e){let n=t,r=[],i,o,s,a,c;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());let u=e&&e.length?e.filter(l=>n.getAttribute(l)).map(l=>[l,n.getAttribute(l)]):null;if(u&&u.length)u.forEach(l=>{r.push(`[${l[0]}="${l[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),i=n.className,i&&$(i))for(o=i.split(/\s+/),c=0;c<o.length;c++)r.push(`.${o[c]}`);let d=["aria-label","type","name","title","alt"];for(c=0;c<d.length;c++)s=d[c],a=n.getAttribute(s),a&&r.push(`[${s}="${a}"]`);return r.join("")}function Mn(){try{return lo.document.location.href}catch{return""}}var R=class extends Error{constructor(e,n="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}};var ho=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function mo(t){return t==="http"||t==="https"}function Oe(t,e=!1){let{host:n,path:r,pass:i,port:o,projectId:s,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&i?`:${i}`:""}@${n}${o?`:${o}`:""}/${r&&`${r}/`}${s}`}function Fr(t){let e=ho.exec(t);if(!e)throw new R(`Invalid Sentry Dsn: ${t}`);let[n,r,i="",o,s="",a]=e.slice(1),c="",u=a,d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){let l=u.match(/^\d+/);l&&(u=l[0])}return Gr({host:o,pass:i,path:c,projectId:u,port:s,protocol:n,publicKey:r})}function Gr(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function go(t){if(!(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__))return;let{port:e,projectId:n,protocol:r}=t;if(["protocol","publicKey","host","projectId"].forEach(o=>{if(!t[o])throw new R(`Invalid Sentry Dsn: ${o} missing`)}),!n.match(/^\d+$/))throw new R(`Invalid Sentry Dsn: Invalid projectId ${n}`);if(!mo(r))throw new R(`Invalid Sentry Dsn: Invalid protocol ${r}`);if(e&&isNaN(parseInt(e,10)))throw new R(`Invalid Sentry Dsn: Invalid port ${e}`);return!0}function Pt(t){let e=typeof t=="string"?Fr(t):Gr(t);return go(e),e}var _o="Sentry Logger ",et=["debug","info","warn","error","log","assert","trace"];function Ut(t){if(!("console"in k))return t();let e=k.console,n={};et.forEach(r=>{let i=e[r]&&e[r].__sentry_original__;r in e&&i&&(n[r]=e[r],e[r]=i)});try{return t()}finally{Object.keys(n).forEach(r=>{e[r]=n[r]})}}function Yr(){let t=!1,e={enable:()=>{t=!0},disable:()=>{t=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?et.forEach(n=>{e[n]=(...r)=>{t&&Ut(()=>{k.console[n](`${_o}[${n}]:`,...r)})}}):et.forEach(n=>{e[n]=()=>{}}),e}var p;typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?p=$e("logger",Yr):p=Yr();function Le(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function Bt(t,e){if(!Array.isArray(t))return"";let n=[];for(let r=0;r<t.length;r++){let i=t[r];try{n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function Hr(t,e,n=!1){return $(t)?Rn(e)?e.test(t):$(e)?n?t===e:t.includes(e):!1:!1}function ht(t,e=[],n=!1){return e.some(r=>Hr(t,r,n))}function M(t,e,n){if(!(e in t))return;let r=t[e],i=n(r);if(typeof i=="function")try{jt(i,r)}catch{}t[e]=i}function tt(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}function jt(t,e){let n=e.prototype||{};t.prototype=e.prototype=n,tt(t,"__sentry_original__",e)}function We(t){return t.__sentry_original__}function kn(t){return Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}function zt(t){if(ft(t))return{message:t.message,name:t.name,stack:t.stack,...Wr(t)};if(Ke(t)){let e={type:t.type,target:$r(t.target),currentTarget:$r(t.currentTarget),...Wr(t)};return typeof CustomEvent<"u"&&W(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function $r(t){try{return Tn(t)?Qe(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function Wr(t){if(typeof t=="object"&&t!==null){let e={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function On(t,e=40){let n=Object.keys(zt(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return Le(n[0],e);for(let r=n.length;r>0;r--){let i=n.slice(0,r).join(", ");if(!(i.length>e))return r===n.length?i:Le(i,e)}return""}function nt(t){return In(t,new Map)}function In(t,e){if(K(t)){let n=e.get(t);if(n!==void 0)return n;let r={};e.set(t,r);for(let i of Object.keys(t))typeof t[i]<"u"&&(r[i]=In(t[i],e));return r}if(Array.isArray(t)){let n=e.get(t);if(n!==void 0)return n;let r=[];return e.set(t,r),t.forEach(i=>{r.push(In(i,e))}),r}return t}var yo=50,Ln=new Map;function Ft(...t){let e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{let i=[];for(let o of e){let s=Ln.get(o);s||(s=new Map,Ln.set(o,s));let a=k._sentryDebugIds;a&&Object.keys(a).forEach(c=>{c.split(`
`).forEach(u=>{let d=o(u);d&&d.filename&&s.set(d.filename,a[c])})})}for(let o of n.split(`
`).slice(r)){if(o.length>1024)continue;let s=o.replace(/\(error: (.*)\)/,"$1");for(let a of e){let c=a(s);if(c){let u=Ln.get(a);if(u&&c.filename){let d=u.get(c.filename);d&&(c.debug_id=d)}i.push(c);break}}}return qr(i)}}function Cn(t){return Array.isArray(t)?Ft(...t):t}function qr(t){if(!t.length)return[];let e=t,n=e[0].function||"",r=e[e.length-1].function||"";return(n.indexOf("captureMessage")!==-1||n.indexOf("captureException")!==-1)&&(e=e.slice(1)),r.indexOf("sentryWrapped")!==-1&&(e=e.slice(0,-1)),e.slice(0,yo).map(i=>({...i,filename:i.filename||e[0].filename,function:i.function||"?"})).reverse()}var An="<anonymous>";function q(t){try{return!t||typeof t!="function"?An:t.name||An}catch{return An}}var qe=Ee();function Gt(){if(!("fetch"in qe))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function mt(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Pn(){if(!Gt())return!1;if(mt(qe.fetch))return!0;let t=!1,e=qe.document;if(e&&typeof e.createElement=="function")try{let n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=mt(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function Un(){let t=qe.chrome,e=t&&t.app&&t.app.runtime,n="history"in qe&&!!qe.history.pushState&&!!qe.history.replaceState;return!e&&n}var S=Ee(),gt={},Vr={};function Eo(t){if(!Vr[t])switch(Vr[t]=!0,t){case"console":bo();break;case"dom":Mo();break;case"xhr":vo();break;case"fetch":xo();break;case"history":To();break;case"error":Io();break;case"unhandledrejection":ko();break;default:(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.warn("unknown instrumentation type:",t);return}}function V(t,e){gt[t]=gt[t]||[],gt[t].push(e),Eo(t)}function Q(t,e){if(!(!t||!gt[t]))for(let n of gt[t]||[])try{n(e)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${q(n)}
Error:`,r)}}function bo(){"console"in S&&et.forEach(function(t){t in S.console&&M(S.console,t,function(e){return function(...n){Q("console",{args:n,level:t}),e&&e.apply(S.console,n)}})})}function xo(){!Pn()||M(S,"fetch",function(t){return function(...e){let n={args:e,fetchData:{method:wo(e),url:So(e)},startTimestamp:Date.now()};return Q("fetch",{...n}),t.apply(S,e).then(r=>(Q("fetch",{...n,endTimestamp:Date.now(),response:r}),r),r=>{throw Q("fetch",{...n,endTimestamp:Date.now(),error:r}),r})}})}function wo(t=[]){return"Request"in S&&W(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function So(t=[]){return typeof t[0]=="string"?t[0]:"Request"in S&&W(t[0],Request)?t[0].url:String(t[0])}function vo(){if(!("XMLHttpRequest"in S))return;let t=XMLHttpRequest.prototype;M(t,"open",function(e){return function(...n){let r=this,i=n[1],o=r.__sentry_xhr__={method:$(n[0])?n[0].toUpperCase():n[0],url:n[1]};$(i)&&o.method==="POST"&&i.match(/sentry_key/)&&(r.__sentry_own_request__=!0);let s=function(){if(r.readyState===4){try{o.status_code=r.status}catch{}Q("xhr",{args:n,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:r})}};return"onreadystatechange"in r&&typeof r.onreadystatechange=="function"?M(r,"onreadystatechange",function(a){return function(...c){return s(),a.apply(r,c)}}):r.addEventListener("readystatechange",s),e.apply(r,n)}}),M(t,"send",function(e){return function(...n){return this.__sentry_xhr__&&n[0]!==void 0&&(this.__sentry_xhr__.body=n[0]),Q("xhr",{args:n,startTimestamp:Date.now(),xhr:this}),e.apply(this,n)}})}var Yt;function To(){if(!Un())return;let t=S.onpopstate;S.onpopstate=function(...n){let r=S.location.href,i=Yt;if(Yt=r,Q("history",{from:i,to:r}),t)try{return t.apply(this,n)}catch{}};function e(n){return function(...r){let i=r.length>2?r[2]:void 0;if(i){let o=Yt,s=String(i);Yt=s,Q("history",{from:o,to:s})}return n.apply(this,r)}}M(S.history,"pushState",e),M(S.history,"replaceState",e)}var Ro=1e3,Ht,$t;function No(t,e){if(!t||t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch{}return!1}function Do(t){if(t.type!=="keypress")return!1;try{let e=t.target;if(!e||!e.tagName)return!0;if(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)return!1}catch{}return!0}function Xr(t,e=!1){return n=>{if(!n||$t===n||Do(n))return;let r=n.type==="keypress"?"input":n.type;Ht===void 0?(t({event:n,name:r,global:e}),$t=n):No($t,n)&&(t({event:n,name:r,global:e}),$t=n),clearTimeout(Ht),Ht=S.setTimeout(()=>{Ht=void 0},Ro)}}function Mo(){if(!("document"in S))return;let t=Q.bind(null,"dom"),e=Xr(t,!0);S.document.addEventListener("click",e,!1),S.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{let r=S[n]&&S[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(M(r,"addEventListener",function(i){return function(o,s,a){if(o==="click"||o=="keypress")try{let c=this,u=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},d=u[o]=u[o]||{refCount:0};if(!d.handler){let l=Xr(t);d.handler=l,i.call(this,o,l,a)}d.refCount++}catch{}return i.call(this,o,s,a)}}),M(r,"removeEventListener",function(i){return function(o,s,a){if(o==="click"||o=="keypress")try{let c=this,u=c.__sentry_instrumentation_handlers__||{},d=u[o];d&&(d.refCount--,d.refCount<=0&&(i.call(this,o,d.handler,a),d.handler=void 0,delete u[o]),Object.keys(u).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return i.call(this,o,s,a)}}))})}var Bn=null;function Io(){Bn=S.onerror,S.onerror=function(t,e,n,r,i){return Q("error",{column:r,error:i,line:n,msg:t,url:e}),Bn?Bn.apply(this,arguments):!1}}var jn=null;function ko(){jn=S.onunhandledrejection,S.onunhandledrejection=function(t){return Q("unhandledrejection",t),jn?jn.apply(this,arguments):!0}}function Zr(){let t=typeof WeakSet=="function",e=t?new WeakSet:[];function n(i){if(t)return e.has(i)?!0:(e.add(i),!1);for(let o=0;o<e.length;o++)if(e[o]===i)return!0;return e.push(i),!1}function r(i){if(t)e.delete(i);else for(let o=0;o<e.length;o++)if(e[o]===i){e.splice(o,1);break}}return[n,r]}function ce(){let t=k,e=t.crypto||t.msCrypto;if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");let n=e&&e.getRandomValues?()=>e.getRandomValues(new Uint8Array(1))[0]:()=>Math.random()*16;return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function Jr(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function ue(t){let{message:e,event_id:n}=t;if(e)return e;let r=Jr(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function rt(t,e,n){let r=t.exception=t.exception||{},i=r.values=r.values||[],o=i[0]=i[0]||{};o.value||(o.value=e||""),o.type||(o.type=n||"Error")}function be(t,e){let n=Jr(t);if(!n)return;let r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...e},e&&"data"in e){let o={...i&&i.data,...e.data};n.mechanism.data=o}}function Wt(t){if(t&&t.__sentry_captured__)return!0;try{tt(t,"__sentry_captured__",!0)}catch{}return!1}function _t(t){return Array.isArray(t)?t:[t]}function zn(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Fn(){return"npm"}function yt(){return!zn()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Gn(t,e){return t.require(e)}function ee(t,e=1/0,n=1/0){try{return qt("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Vt(t,e=3,n=100*1024){let r=ee(t,e);return Co(r)>n?Vt(t,e-1,n):r}function qt(t,e,n=1/0,r=1/0,i=Zr()){let[o,s]=i;if(e===null||["number","boolean","string"].includes(typeof e)&&!Dn(e))return e;let a=Oo(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;if(n===0)return a.replace("object ","");if(o(e))return"[Circular ~]";let c=e;if(c&&typeof c.toJSON=="function")try{let f=c.toJSON();return qt("",f,n-1,r,i)}catch{}let u=Array.isArray(e)?[]:{},d=0,l=zt(e);for(let f in l){if(!Object.prototype.hasOwnProperty.call(l,f))continue;if(d>=r){u[f]="[MaxProperties ~]";break}let h=l[f];u[f]=qt(f,h,n-1,r,i),d++}return s(e),u}function Oo(t,e){try{return t==="domain"&&e&&typeof e=="object"&&e._events?"[Domain]":t==="domainEmitter"?"[DomainEmitter]":typeof global<"u"&&e===global?"[Global]":typeof window<"u"&&e===window?"[Window]":typeof document<"u"&&e===document?"[Document]":Nn(e)?"[SyntheticEvent]":typeof e=="number"&&e!==e?"[NaN]":e===void 0?"[undefined]":typeof e=="function"?`[Function: ${q(e)}]`:typeof e=="symbol"?`[${String(e)}]`:typeof e=="bigint"?`[BigInt: ${String(e)}]`:`[object ${Lo(e)}]`}catch(n){return`**non-serializable** (${n})`}}function Lo(t){let e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}function Ao(t){return~-encodeURI(t).split(/%..|./).length}function Co(t){return Ao(JSON.stringify(t))}var xe;(function(t){t[t.PENDING=0]="PENDING";let n=1;t[t.RESOLVED=n]="RESOLVED";let r=2;t[t.REJECTED=r]="REJECTED"})(xe||(xe={}));function j(t){return new N(e=>{e(t)})}function Ae(t){return new N((e,n)=>{n(t)})}var N=class{__init(){this._state=xe.PENDING}__init2(){this._handlers=[]}constructor(e){N.prototype.__init.call(this),N.prototype.__init2.call(this),N.prototype.__init3.call(this),N.prototype.__init4.call(this),N.prototype.__init5.call(this),N.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new N((r,i)=>{this._handlers.push([!1,o=>{if(!e)r(o);else try{r(e(o))}catch(s){i(s)}},o=>{if(!n)i(o);else try{r(n(o))}catch(s){i(s)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new N((n,r)=>{let i,o;return this.then(s=>{o=!1,i=s,e&&e()},s=>{o=!0,i=s,e&&e()}).then(()=>{if(o){r(i);return}n(i)})})}__init3(){this._resolve=e=>{this._setResult(xe.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(xe.REJECTED,e)}}__init5(){this._setResult=(e,n)=>{if(this._state===xe.PENDING){if(He(n)){n.then(this._resolve,this._reject);return}this._state=e,this._value=n,this._executeHandlers()}}}__init6(){this._executeHandlers=()=>{if(this._state===xe.PENDING)return;let e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===xe.RESOLVED&&n[1](this._value),this._state===xe.REJECTED&&n[2](this._value),n[0]=!0)})}}};function Yn(t){let e=[];function n(){return t===void 0||e.length<t}function r(s){return e.splice(e.indexOf(s),1)[0]}function i(s){if(!n())return Ae(new R("Not adding Promise because buffer limit was reached."));let a=s();return e.indexOf(a)===-1&&e.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function o(s){return new N((a,c)=>{let u=e.length;if(!u)return a(!0);let d=setTimeout(()=>{s&&s>0&&a(!1)},s);e.forEach(l=>{j(l).then(()=>{--u||(clearTimeout(d),a(!0))},c)})})}return{$:e,add:i,drain:o}}function Et(t){if(!t)return{};let e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};let n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+n+r}}var Kr=["fatal","error","warning","log","info","debug"];function Hn(t){return t==="warn"?"warning":Kr.includes(t)?t:"log"}var ei=Ee(),Wn={nowSeconds:()=>Date.now()/1e3};function Po(){let{performance:t}=ei;if(!t||!t.now)return;let e=Date.now()-t.now();return{now:()=>t.now(),timeOrigin:e}}function Uo(){try{return Gn(module,"perf_hooks").performance}catch{return}}var $n=yt()?Uo():Po(),Qr=$n===void 0?Wn:{nowSeconds:()=>($n.timeOrigin+$n.now())/1e3},we=Wn.nowSeconds.bind(Wn),Xt=Qr.nowSeconds.bind(Qr);var bt,Bo=(()=>{let{performance:t}=ei;if(!t||!t.now){bt="none";return}let e=3600*1e3,n=t.now(),r=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,o=i<e,s=t.timing&&t.timing.navigationStart,c=typeof s=="number"?Math.abs(s+n-r):e,u=c<e;return o||u?i<=c?(bt="timeOrigin",t.timeOrigin):(bt="navigationStart",s):(bt="dateNow",r)})();function Ce(t,e=[]){return[t,e]}function Vn(t,e){let[n,r]=t;return[n,[...r,e]]}function Zt(t,e){t[1].forEach(r=>{let i=r[0].type;e(r,i)})}function qn(t,e){return(e||new TextEncoder).encode(t)}function xt(t,e){let[n,r]=t,i=JSON.stringify(n);function o(s){typeof i=="string"?i=typeof s=="string"?i+s:[qn(i,e),s]:i.push(typeof s=="string"?qn(s,e):s)}for(let s of r){let[a,c]=s;if(o(`
${JSON.stringify(a)}
`),typeof c=="string"||c instanceof Uint8Array)o(c);else{let u;try{u=JSON.stringify(c)}catch{u=JSON.stringify(ee(c))}o(u)}}return typeof i=="string"?i:jo(i)}function jo(t){let e=t.reduce((i,o)=>i+o.length,0),n=new Uint8Array(e),r=0;for(let i of t)n.set(i,r),r+=i.length;return n}function Xn(t,e){let n=typeof t.data=="string"?qn(t.data,e):t.data;return[nt({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}var zo={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay"};function Jt(t){return zo[t]}function Kt(t){if(!t||!t.sdk)return;let{name:e,version:n}=t.sdk;return{name:e,version:n}}function Zn(t,e,n,r){let i=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&{dsn:Oe(r)},...t.type==="transaction"&&i&&{trace:nt({...i})}}}function Jn(t,e,n){let r=[{type:"client_report"},{timestamp:n||we(),discarded_events:t}];return Ce(e?{dsn:e}:{},[r])}function ti(t,e=Date.now()){let n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;let r=Date.parse(`${t}`);return isNaN(r)?6e4:r-e}function ni(t,e){return t[e]||t.all||0}function Kn(t,e,n=Date.now()){return ni(t,e)>n}function Qn(t,{statusCode:e,headers:n},r=Date.now()){let i={...t},o=n&&n["x-sentry-rate-limits"],s=n&&n["retry-after"];if(o)for(let a of o.trim().split(",")){let[c,u]=a.split(":",2),d=parseInt(c,10),l=(isNaN(d)?60:d)*1e3;if(!u)i.all=r+l;else for(let f of u.split(";"))i[f]=r+l}else s?i.all=r+ti(s,r):e===429&&(i.all=r+60*1e3);return i}function ri(t){let e=Xt(),n={sid:ce(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Fo(n)};return t&&Se(n,t),n}function Se(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Xt(),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:ce()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{let n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function ii(t,e){let n={};e?n={status:e}:t.status==="ok"&&(n={status:"exited"}),Se(t,n)}function Fo(t){return nt({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}var Go=100,z=class{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(e){let n=new z;return e&&(n._breadcrumbs=[...e._breadcrumbs],n._tags={...e._tags},n._extra={...e._extra},n._contexts={...e._contexts},n._user=e._user,n._level=e._level,n._span=e._span,n._session=e._session,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=[...e._eventProcessors],n._requestSession=e._requestSession,n._attachments=[...e._attachments],n._sdkProcessingMetadata={...e._sdkProcessingMetadata}),n}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&Se(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){let e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if(typeof e=="function"){let n=e(this);return n instanceof z?n:this}return e instanceof z?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):K(e)&&(e=e,this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(e,n){let r=typeof n=="number"?n:Go;if(r<=0)return this;let i={timestamp:we(),...e};return this._breadcrumbs=[...this._breadcrumbs,i].slice(-r),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,n={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};let r=this._span.transaction&&this._span.transaction.name;r&&(e.tags={transaction:r,...e.tags})}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...oi(),...this._eventProcessors],e,n)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}_notifyEventProcessors(e,n,r,i=0){return new N((o,s)=>{let a=e[i];if(n===null||typeof a!="function")o(n);else{let c=a({...n},r);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&a.id&&c===null&&p.log(`Event processor "${a.id}" dropped event`),He(c)?c.then(u=>this._notifyEventProcessors(e,u,r,i+1).then(o)).then(null,s):this._notifyEventProcessors(e,c,r,i+1).then(o).then(null,s)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}_applyFingerprint(e){e.fingerprint=e.fingerprint?_t(e.fingerprint):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}};function oi(){return $e("globalEventProcessors",()=>[])}function Pe(t){oi().push(t)}var er=4,Yo=100,ve=class{__init(){this._stack=[{}]}constructor(e,n=new z,r=er){this._version=r,ve.prototype.__init.call(this),this.getStackTop().scope=n,e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){let n=this.getStackTop();n.client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){let e=z.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(e){let n=this.pushScope();try{e(n)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,n){let r=this._lastEventId=n&&n.event_id?n.event_id:ce(),i=new Error("Sentry syntheticException");return this._withClient((o,s)=>{o.captureException(e,{originalException:e,syntheticException:i,...n,event_id:r},s)}),r}captureMessage(e,n,r){let i=this._lastEventId=r&&r.event_id?r.event_id:ce(),o=new Error(e);return this._withClient((s,a)=>{s.captureMessage(e,n,{originalException:e,syntheticException:o,...r,event_id:i},a)}),i}captureEvent(e,n){let r=n&&n.event_id?n.event_id:ce();return e.type||(this._lastEventId=r),this._withClient((i,o)=>{i.captureEvent(e,{...n,event_id:r},o)}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,n){let{scope:r,client:i}=this.getStackTop();if(!r||!i)return;let{beforeBreadcrumb:o=null,maxBreadcrumbs:s=Yo}=i.getOptions&&i.getOptions()||{};if(s<=0)return;let c={timestamp:we(),...e},u=o?Ut(()=>o(c,n)):c;u!==null&&r.addBreadcrumb(u,s)}setUser(e){let n=this.getScope();n&&n.setUser(e)}setTags(e){let n=this.getScope();n&&n.setTags(e)}setExtras(e){let n=this.getScope();n&&n.setExtras(e)}setTag(e,n){let r=this.getScope();r&&r.setTag(e,n)}setExtra(e,n){let r=this.getScope();r&&r.setExtra(e,n)}setContext(e,n){let r=this.getScope();r&&r.setContext(e,n)}configureScope(e){let{scope:n,client:r}=this.getStackTop();n&&r&&e(n)}run(e){let n=Qt(this);try{e(this)}finally{Qt(n)}}getIntegration(e){let n=this.getClient();if(!n)return null;try{return n.getIntegration(e)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,n){return this._callExtensionMethod("startTransaction",e,n)}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){let e=this.getStackTop(),n=e&&e.scope,r=n&&n.getSession();r&&ii(r),this._sendSessionUpdate(),n&&n.setSession()}startSession(e){let{scope:n,client:r}=this.getStackTop(),{release:i,environment:o}=r&&r.getOptions()||{},{userAgent:s}=k.navigator||{},a=ri({release:i,environment:o,...n&&{user:n.getUser()},...s&&{userAgent:s},...e});if(n){let c=n.getSession&&n.getSession();c&&c.status==="ok"&&Se(c,{status:"exited"}),this.endSession(),n.setSession(a)}return a}shouldSendDefaultPii(){let e=this.getClient(),n=e&&e.getOptions();return Boolean(n&&n.sendDefaultPii)}_sendSessionUpdate(){let{scope:e,client:n}=this.getStackTop();if(!e)return;let r=e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_withClient(e){let{scope:n,client:r}=this.getStackTop();r&&e(r,n)}_callExtensionMethod(e,...n){let i=wt().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[e]=="function")return i.extensions[e].apply(this,n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.warn(`Extension method ${e} couldn't be found, doing nothing.`)}};function wt(){return k.__SENTRY__=k.__SENTRY__||{extensions:{},hub:void 0},k}function Qt(t){let e=wt(),n=le(e);return en(e,t),n}function x(){let t=wt();return(!si(t)||le(t).isOlderThan(er))&&en(t,new ve),yt()?Ho(t):le(t)}function Ho(t){try{let e=wt().__SENTRY__,n=e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active;if(!n)return le(t);if(!si(n)||le(n).isOlderThan(er)){let r=le(t).getStackTop();en(n,new ve(r.client,z.clone(r.scope)))}return le(n)}catch{return le(t)}}function si(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function le(t){return $e("hub",()=>new ve,t)}function en(t,e){if(!t)return!1;let n=t.__SENTRY__=t.__SENTRY__||{};return n.hub=e,!0}function it(t,e){return x().captureException(t,{captureContext:e})}function tn(t,e){let n=typeof e=="string"?e:void 0,r=typeof e!="string"?{captureContext:e}:void 0;return x().captureMessage(t,n,r)}function nn(t){x().withScope(t)}var $o="7";function Wo(t){let e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function qo(t){return`${Wo(t)}${t.projectId}/envelope/`}function Vo(t,e){return kn({sentry_key:t.publicKey,sentry_version:$o,...e&&{sentry_client:`${e.name}/${e.version}`}})}function St(t,e={}){let n=typeof e=="string"?e:e.tunnel,r=typeof e=="string"||!e._metadata?void 0:e._metadata.sdk;return n||`${qo(t)}?${Vo(t,r)}`}function Xo(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]]),t}function ai(t,e,n,r){let i=Kt(n),o={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&{dsn:Oe(e)}},s="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t];return Ce(o,[s])}function ci(t,e,n,r){let i=Kt(n),o=t.type&&t.type!=="replay_event"?t.type:"event";Xo(t,n&&n.sdk);let s=Zn(t,i,r,e);return delete t.sdkProcessingMetadata,Ce(s,[[{type:o},t]])}var ui=[];function Zo(t){let e={};return t.forEach(n=>{let{name:r}=n,i=e[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(e[r]=n)}),Object.values(e)}function tr(t){let e=t.defaultIntegrations||[],n=t.integrations;e.forEach(s=>{s.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...e,...n]:typeof n=="function"?r=_t(n(e)):r=e;let i=Zo(r),o=i.findIndex(s=>s.name==="Debug");if(o!==-1){let[s]=i.splice(o,1);i.push(s)}return i}function li(t){let e={};return t.forEach(n=>{n&&nr(n,e)}),e}function nr(t,e){e[t.name]=t,ui.indexOf(t.name)===-1&&(t.setupOnce(Pe,x),ui.push(t.name),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.log(`Integration installed: ${t.name}`))}function di(t,e,n,r){let{normalizeDepth:i=3,normalizeMaxBreadth:o=1e3}=t,s={...e,event_id:e.event_id||n.event_id||ce(),timestamp:e.timestamp||we()},a=n.integrations||t.integrations.map(d=>d.name);Jo(s,t),Ko(s,a);let c=r;n.captureContext&&(c=z.clone(c).update(n.captureContext));let u=j(s);if(c){if(c.getAttachments){let d=[...n.attachments||[],...c.getAttachments()];d.length&&(n.attachments=d)}u=c.applyToEvent(s,n)}return u.then(d=>typeof i=="number"&&i>0?Qo(d,i,o):d)}function Jo(t,e){let{environment:n,release:r,dist:i,maxValueLength:o=250}=e;"environment"in t||(t.environment="environment"in e?n:"production"),t.release===void 0&&r!==void 0&&(t.release=r),t.dist===void 0&&i!==void 0&&(t.dist=i),t.message&&(t.message=Le(t.message,o));let s=t.exception&&t.exception.values&&t.exception.values[0];s&&s.value&&(s.value=Le(s.value,o));let a=t.request;a&&a.url&&(a.url=Le(a.url,o))}function Ko(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function Qo(t,e,n){if(!t)return null;let r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(i=>({...i,...i.data&&{data:ee(i.data,e,n)}}))},...t.user&&{user:ee(t.user,e,n)},...t.contexts&&{contexts:ee(t.contexts,e,n)},...t.extra&&{extra:ee(t.extra,e,n)}};return t.contexts&&t.contexts.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=ee(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map(i=>(i.data&&(i.data=ee(i.data,e,n)),i))),r}var fi="Not capturing exception because it's already been captured.",de=class{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}constructor(e){if(de.prototype.__init.call(this),de.prototype.__init2.call(this),de.prototype.__init3.call(this),de.prototype.__init4.call(this),this._options=e,e.dsn){this._dsn=Pt(e.dsn);let n=St(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:n})}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.warn("No DSN provided, client will not do anything.")}captureException(e,n,r){if(Wt(e)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.log(fi);return}let i=n&&n.event_id;return this._process(this.eventFromException(e,n).then(o=>this._captureEvent(o,n,r)).then(o=>{i=o})),i}captureMessage(e,n,r,i){let o=r&&r.event_id,s=Je(e)?this.eventFromMessage(String(e),n,r):this.eventFromException(e,r);return this._process(s.then(a=>this._captureEvent(a,r,i)).then(a=>{o=a})),o}captureEvent(e,n,r){if(n&&n.originalException&&Wt(n.originalException)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.log(fi);return}let i=n&&n.event_id;return this._process(this._captureEvent(e,n,r).then(o=>{i=o})),i}captureSession(e){if(!this._isEnabled()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.warn("SDK not enabled, will not capture session.");return}typeof e.release!="string"?(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),Se(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){let n=this._transport;return n?this._isClientDoneProcessing(e).then(r=>n.flush(e).then(i=>r&&i)):j(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,n))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=li(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){nr(e,this._integrations)}sendEvent(e,n={}){if(this._dsn){let r=ci(e,this._dsn,this._options._metadata,this._options.tunnel);for(let i of n.attachments||[])r=Vn(r,Xn(i,this._options.transportOptions&&this._options.transportOptions.textEncoder));this._sendEnvelope(r)}}sendSession(e){if(this._dsn){let n=ai(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}}recordDroppedEvent(e,n,r){if(this._options.sendClientReports){let i=`${e}:${n}`;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.log(`Adding outcome: "${i}"`),this._outcomes[i]=this._outcomes[i]+1||1}}_updateSessionFromEvent(e,n){let r=!1,i=!1,o=n.exception&&n.exception.values;if(o){i=!0;for(let c of o){let u=c.mechanism;if(u&&u.handled===!1){r=!0;break}}}let s=e.status==="ok";(s&&e.errors===0||s&&r)&&(Se(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new N(n=>{let r=0,i=1,o=setInterval(()=>{this._numProcessing==0?(clearInterval(o),n(!0)):(r+=i,e&&r>=e&&(clearInterval(o),n(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._dsn!==void 0}_prepareEvent(e,n,r){let i=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o.length>0&&(n.integrations=o),di(i,e,n,r)}_captureEvent(e,n={},r){return this._processEvent(e,n,r).then(i=>i.event_id,i=>{if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){let o=i;o.logLevel==="log"?p.log(o.message):p.warn(o)}})}_processEvent(e,n,r){let i=this.getOptions(),{sampleRate:o}=i;if(!this._isEnabled())return Ae(new R("SDK not enabled, will not capture event.","log"));let s=hi(e),a=pi(e),c=e.type||"error",u=`before send for type \`${c}\``;if(a&&typeof o=="number"&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",e),Ae(new R(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));let d=c==="replay_event"?"replay":c;return this._prepareEvent(e,n,r).then(l=>{if(l===null)throw this.recordDroppedEvent("event_processor",d,e),new R("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return l;let h=ts(i,l,n);return es(h,u)}).then(l=>{if(l===null)throw this.recordDroppedEvent("before_send",d,e),new R(`${u} returned \`null\`, will not send event.`,"log");let f=r&&r.getSession();!s&&f&&this._updateSessionFromEvent(f,l);let h=l.transaction_info;if(s&&h&&l.transaction!==e.transaction){let m="custom";l.transaction_info={...h,source:m}}return this.sendEvent(l,n),l}).then(null,l=>{throw l instanceof R?l:(this.captureException(l,{data:{__sentry__:!0},originalException:l}),new R(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${l}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(e){this._transport&&this._dsn?this._transport.send(e).then(null,n=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.error("Error while sending event:",n)}):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.error("Transport disabled")}_clearOutcomes(){let e=this._outcomes;return this._outcomes={},Object.keys(e).map(n=>{let[r,i]=n.split(":");return{reason:r,category:i,quantity:e[n]}})}};function es(t,e){let n=`${e} must return \`null\` or a valid event.`;if(He(t))return t.then(r=>{if(!K(r)&&r!==null)throw new R(n);return r},r=>{throw new R(`${e} rejected with ${r}`)});if(!K(t)&&t!==null)throw new R(n);return t}function ts(t,e,n){let{beforeSend:r,beforeSendTransaction:i}=t;return pi(e)&&r?r(e,n):hi(e)&&i?i(e,n):e}function pi(t){return t.type===void 0}function hi(t){return t.type==="transaction"}function rr(t,e){e.debug===!0&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?p.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));let n=x(),r=n.getScope();r&&r.update(e.initialScope);let i=new t(e);n.bindClient(i)}var ns=30;function ot(t,e,n=Yn(t.bufferSize||ns)){let r={},i=s=>n.drain(s);function o(s){let a=[];if(Zt(s,(l,f)=>{let h=Jt(f);if(Kn(r,h)){let m=mi(l,f);t.recordDroppedEvent("ratelimit_backoff",h,m)}else a.push(l)}),a.length===0)return j();let c=Ce(s[0],a),u=l=>{Zt(c,(f,h)=>{let m=mi(f,h);t.recordDroppedEvent(l,Jt(h),m)})},d=()=>e({body:xt(c,t.textEncoder)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=Qn(r,l),l),l=>{throw u("network_error"),l});return n.add(d).then(l=>l,l=>{if(l instanceof R)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.error("Skipped sending event because buffer is full."),u("queue_overflow"),j();throw l})}return{send:o,flush:i}}function mi(t,e){if(!(e!=="event"&&e!=="transaction"))return Array.isArray(t)?t[1]:void 0}var vt="7.38.0";var Ve={};jr(Ve,{FunctionToString:()=>Te,InboundFilters:()=>fe});var gi,Te=class{constructor(){Te.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=Te.id}setupOnce(){gi=Function.prototype.toString,Function.prototype.toString=function(...e){let n=We(this)||this;return gi.apply(n,e)}}};Te.__initStatic();var rs=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],fe=class{static __initStatic(){this.id="InboundFilters"}__init(){this.name=fe.id}constructor(e={}){this._options=e,fe.prototype.__init.call(this)}setupOnce(e,n){let r=i=>{let o=n();if(o){let s=o.getIntegration(fe);if(s){let a=o.getClient(),c=a?a.getOptions():{},u=is(s._options,c);return os(i,u)?null:i}}return i};r.id=this.name,e(r)}};fe.__initStatic();function is(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...rs],ignoreInternal:t.ignoreInternal!==void 0?t.ignoreInternal:!0}}function os(t,e){return e.ignoreInternal&&ls(t)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.warn(`Event dropped due to being internal Sentry Error.
Event: ${ue(t)}`),!0):ss(t,e.ignoreErrors)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${ue(t)}`),!0):as(t,e.denyUrls)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${ue(t)}.
Url: ${rn(t)}`),!0):cs(t,e.allowUrls)?!1:((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${ue(t)}.
Url: ${rn(t)}`),!0)}function ss(t,e){return!e||!e.length?!1:us(t).some(n=>ht(n,e))}function as(t,e){if(!e||!e.length)return!1;let n=rn(t);return n?ht(n,e):!1}function cs(t,e){if(!e||!e.length)return!0;let n=rn(t);return n?ht(n,e):!0}function us(t){if(t.message)return[t.message];if(t.exception)try{let{type:e="",value:n=""}=t.exception.values&&t.exception.values[0]||{};return[`${n}`,`${e}: ${n}`]}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.error(`Cannot extract message for event ${ue(t)}`),[]}return[]}function ls(t){try{return t.exception.values[0].type==="SentryError"}catch{}return!1}function ds(t=[]){for(let e=t.length-1;e>=0;e--){let n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function rn(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?ds(e):null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.error(`Cannot extract url for event ${ue(t)}`),null}}var g=k,ir=0;function or(){return ir>0}function Ss(){ir++,setTimeout(()=>{ir--})}function Ue(t,e={},n){if(typeof t!="function")return t;try{let i=t.__sentry_wrapped__;if(i)return i;if(We(t))return t}catch{return t}let r=function(){let i=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);let o=i.map(s=>Ue(s,e));return t.apply(this,o)}catch(o){throw Ss(),nn(s=>{s.addEventProcessor(a=>(e.mechanism&&(rt(a,void 0,void 0),be(a,e.mechanism)),a.extra={...a.extra,arguments:i},a)),it(o)}),o}};try{for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch{}jt(r,t),tt(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return t.name}})}catch{}return r}function cr(t,e){let n=ur(t,e),r={type:e&&e.name,value:Ns(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function vs(t,e,n,r){let o=x().getClient(),s=o&&o.getOptions().normalizeDepth,a={exception:{values:[{type:Ke(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:`Non-Error ${r?"promise rejection":"exception"} captured with keys: ${On(e)}`}]},extra:{__serialized__:Vt(e,s)}};if(n){let c=ur(t,n);c.length&&(a.exception.values[0].stacktrace={frames:c})}return a}function sr(t,e){return{exception:{values:[cr(t,e)]}}}function ur(t,e){let n=e.stacktrace||e.stack||"",r=Rs(e);try{return t(n,r)}catch{}return[]}var Ts=/Minified React error #\d+;/i;function Rs(t){if(t){if(typeof t.framesToPop=="number")return t.framesToPop;if(Ts.test(t.message))return 1}return 0}function Ns(t){let e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function _i(t,e,n,r){let i=n&&n.syntheticException||void 0,o=on(t,e,i,r);return be(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),j(o)}function yi(t,e,n="info",r,i){let o=r&&r.syntheticException||void 0,s=ar(t,e,o,i);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),j(s)}function on(t,e,n,r,i){let o;if(pt(e)&&e.error)return sr(t,e.error);if(At(e)||vn(e)){let s=e;if("stack"in e)o=sr(t,e);else{let a=s.name||(At(s)?"DOMError":"DOMException"),c=s.message?`${a}: ${s.message}`:a;o=ar(t,c,n,r),rt(o,c)}return"code"in s&&(o.tags={...o.tags,"DOMException.code":`${s.code}`}),o}return ft(e)?sr(t,e):K(e)||Ke(e)?(o=vs(t,e,n,i),be(o,{synthetic:!0}),o):(o=ar(t,e,n,r),rt(o,`${e}`,void 0),be(o,{synthetic:!0}),o)}function ar(t,e,n,r){let i={message:e};if(r&&n){let o=ur(t,n);o.length&&(i.exception={values:[{value:e,stacktrace:{frames:o}}]})}return i}var sn=1024,lr="Breadcrumbs",pe=class{static __initStatic(){this.id=lr}__init(){this.name=pe.id}constructor(e){pe.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){this.options.console&&V("console",Ms),this.options.dom&&V("dom",Ds(this.options.dom)),this.options.xhr&&V("xhr",Is),this.options.fetch&&V("fetch",ks),this.options.history&&V("history",Os)}addSentryBreadcrumb(e){this.options.sentry&&x().addBreadcrumb({category:`sentry.${e.type==="transaction"?"transaction":"event"}`,event_id:e.event_id,level:e.level,message:ue(e)},{event:e})}};pe.__initStatic();function Ds(t){function e(n){let r,i=typeof t=="object"?t.serializeAttribute:void 0,o=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;o&&o>sn&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.warn(`\`dom.maxStringLength\` cannot exceed ${sn}, but a value of ${o} was configured. Sentry will use ${sn} instead.`),o=sn),typeof i=="string"&&(i=[i]);try{r=n.event.target?Qe(n.event.target,{keyAttrs:i,maxStringLength:o}):Qe(n.event,{keyAttrs:i,maxStringLength:o})}catch{r="<unknown>"}r.length!==0&&x().addBreadcrumb({category:`ui.${n.name}`,message:r},{event:n.event,name:n.name,global:n.global})}return e}function Ms(t){for(let n=0;n<t.args.length;n++)if(t.args[n]==="ref=Ref<"){t.args[n+1]="viewRef";break}let e={category:"console",data:{arguments:t.args,logger:"console"},level:Hn(t.level),message:Bt(t.args," ")};if(t.level==="assert")if(t.args[0]===!1)e.message=`Assertion failed: ${Bt(t.args.slice(1)," ")||"console.assert"}`,e.data.arguments=t.args.slice(1);else return;x().addBreadcrumb(e,{input:t.args,level:t.level})}function Is(t){if(t.endTimestamp){if(t.xhr.__sentry_own_request__)return;let{method:e,url:n,status_code:r,body:i}=t.xhr.__sentry_xhr__||{};x().addBreadcrumb({category:"xhr",data:{method:e,url:n,status_code:r},type:"http"},{xhr:t.xhr,input:i});return}}function ks(t){!t.endTimestamp||t.fetchData.url.match(/sentry_key/)&&t.fetchData.method==="POST"||(t.error?x().addBreadcrumb({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args}):x().addBreadcrumb({category:"fetch",data:{...t.fetchData,status_code:t.response.status},type:"http"},{input:t.args,response:t.response}))}function Os(t){let e=t.from,n=t.to,r=Et(g.location.href),i=Et(e),o=Et(n);i.path||(i=r),r.protocol===o.protocol&&r.host===o.host&&(n=o.relative),r.protocol===i.protocol&&r.host===i.host&&(e=i.relative),x().addBreadcrumb({category:"navigation",data:{from:e,to:n}})}var an=class extends de{constructor(e){let n=g.SENTRY_SDK_SOURCE||Fn();e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${n}:@sentry/browser`,version:vt}],version:vt},super(e),e.sendClientReports&&g.document&&g.document.addEventListener("visibilitychange",()=>{g.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,n){return _i(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return yi(this._options.stackParser,e,n,r,this._options.attachStacktrace)}sendEvent(e,n){let r=this.getIntegrationById(lr);r&&r.addSentryBreadcrumb&&r.addSentryBreadcrumb(e),super.sendEvent(e,n)}_prepareEvent(e,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r)}_flushOutcomes(){let e=this._clearOutcomes();if(e.length===0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.log("No outcomes to send");return}if(!this._dsn){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.log("No dsn provided, will not send outcomes");return}(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.log("Sending outcomes:",e);let n=St(this._dsn,this._options),r=Jn(e,this._options.tunnel&&Oe(this._dsn));try{Object.prototype.toString.call(g&&g.navigator)==="[object Navigator]"&&typeof g.navigator.sendBeacon=="function"&&!this._options.transportOptions?g.navigator.sendBeacon.bind(g.navigator)(n,xt(r)):this._sendEnvelope(r)}catch(i){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.error(i)}}};var Tt;function Ei(){if(Tt)return Tt;if(mt(g.fetch))return Tt=g.fetch.bind(g);let t=g.document,e=g.fetch;if(t&&typeof t.createElement=="function")try{let n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);let r=n.contentWindow;r&&r.fetch&&(e=r.fetch),t.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return Tt=e.bind(g)}function bi(){Tt=void 0}function xi(t,e=Ei()){function n(r){let i={body:r.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:r.body.length<=65536,...t.fetchOptions};try{return e(t.url,i).then(o=>({statusCode:o.status,headers:{"x-sentry-rate-limits":o.headers.get("X-Sentry-Rate-Limits"),"retry-after":o.headers.get("Retry-After")}}))}catch(o){return bi(),Ae(o)}}return ot(t,n)}var Ls=4;function wi(t){function e(n){return new N((r,i)=>{let o=new XMLHttpRequest;o.onerror=i,o.onreadystatechange=()=>{o.readyState===Ls&&r({statusCode:o.status,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")}})},o.open("POST",t.url);for(let s in t.headers)Object.prototype.hasOwnProperty.call(t.headers,s)&&o.setRequestHeader(s,t.headers[s]);o.send(n.body)})}return ot(t,e)}var cn="?";var As=30,Cs=40,Ps=50;function dr(t,e,n,r){let i={filename:t,abs_path:t,function:e,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}var Us=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?(?:async )?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Bs=/\((\S*)(?::(\d+))(?::(\d+))\)/,js=t=>{let e=Us.exec(t);if(e){if(e[2]&&e[2].indexOf("eval")===0){let o=Bs.exec(e[2]);o&&(e[2]=o[1],e[3]=o[2],e[4]=o[3])}let[r,i]=vi(e[1]||cn,e[2]);return dr(i,r,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}},zs=[As,js],Fs=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Gs=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ys=t=>{let e=Fs.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){let o=Gs.exec(e[3]);o&&(e[1]=e[1]||"eval",e[3]=o[1],e[4]=o[2],e[5]="")}let r=e[3],i=e[1]||cn;return[i,r]=vi(i,r),dr(r,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},Hs=[Ps,Ys],$s=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Ws=t=>{let e=$s.exec(t);return e?dr(e[2],e[1]||cn,+e[3],e[4]?+e[4]:void 0):void 0},qs=[Cs,Ws];var Vs=[zs,Hs,qs],Si=Ft(...Vs),vi=(t,e)=>{let n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:cn,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]};var F=class{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=F.id}__init2(){this._installFunc={onerror:Xs,onunhandledrejection:Zs}}constructor(e){F.prototype.__init.call(this),F.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...e}}setupOnce(){Error.stackTraceLimit=50;let e=this._options;for(let n in e){let r=this._installFunc[n];r&&e[n]&&(Qs(n),r(),this._installFunc[n]=void 0)}}};F.__initStatic();function Xs(){V("error",t=>{let[e,n,r]=Ni();if(!e.getIntegration(F))return;let{msg:i,url:o,line:s,column:a,error:c}=t;if(or()||c&&c.__sentry_own_request__)return;let u=c===void 0&&$(i)?Ks(i,o,s,a):Ti(on(n,c||i,void 0,r,!1),o,s,a);u.level="error",Ri(e,c,u,"onerror")})}function Zs(){V("unhandledrejection",t=>{let[e,n,r]=Ni();if(!e.getIntegration(F))return;let i=t;try{"reason"in t?i=t.reason:"detail"in t&&"reason"in t.detail&&(i=t.detail.reason)}catch{}if(or()||i&&i.__sentry_own_request__)return!0;let o=Je(i)?Js(i):on(n,i,void 0,r,!0);o.level="error",Ri(e,i,o,"onunhandledrejection")})}function Js(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function Ks(t,e,n,r){let i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,o=pt(t)?t.message:t,s="Error",a=o.match(i);return a&&(s=a[1],o=a[2]),Ti({exception:{values:[{type:s,value:o}]}},e,n,r)}function Ti(t,e,n,r){let i=t.exception=t.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,d=isNaN(parseInt(n,10))?void 0:n,l=$(e)&&e.length>0?e:Mn();return c.length===0&&c.push({colno:u,filename:l,function:"?",in_app:!0,lineno:d}),t}function Qs(t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.log(`Global Handler attached: ${t}`)}function Ri(t,e,n,r){be(n,{handled:!1,type:r}),t.captureEvent(n,{originalException:e})}function Ni(){let t=x(),e=t.getClient(),n=e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[t,n.stackParser,n.attachStacktrace]}var ea=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],he=class{static __initStatic(){this.id="TryCatch"}__init(){this.name=he.id}constructor(e){he.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&M(g,"setTimeout",Di),this._options.setInterval&&M(g,"setInterval",Di),this._options.requestAnimationFrame&&M(g,"requestAnimationFrame",ta),this._options.XMLHttpRequest&&"XMLHttpRequest"in g&&M(XMLHttpRequest.prototype,"send",na);let e=this._options.eventTarget;e&&(Array.isArray(e)?e:ea).forEach(ra)}};he.__initStatic();function Di(t){return function(...e){let n=e[0];return e[0]=Ue(n,{mechanism:{data:{function:q(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}}function ta(t){return function(e){return t.apply(this,[Ue(e,{mechanism:{data:{function:"requestAnimationFrame",handler:q(t)},handled:!0,type:"instrument"}})])}}function na(t){return function(...e){let n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&M(n,i,function(o){let s={mechanism:{data:{function:i,handler:q(o)},handled:!0,type:"instrument"}},a=We(o);return a&&(s.mechanism.data.handler=q(a)),Ue(o,s)})}),t.apply(this,e)}}function ra(t){let e=g,n=e[t]&&e[t].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(M(n,"addEventListener",function(r){return function(i,o,s){try{typeof o.handleEvent=="function"&&(o.handleEvent=Ue(o.handleEvent,{mechanism:{data:{function:"handleEvent",handler:q(o),target:t},handled:!0,type:"instrument"}}))}catch{}return r.apply(this,[i,Ue(o,{mechanism:{data:{function:"addEventListener",handler:q(o),target:t},handled:!0,type:"instrument"}}),s])}}),M(n,"removeEventListener",function(r){return function(i,o,s){let a=o;try{let c=a&&a.__sentry_wrapped__;c&&r.call(this,i,c,s)}catch{}return r.call(this,i,a,s)}}))}var ia="cause",oa=5,te=class{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=te.id}constructor(e={}){te.prototype.__init.call(this),this._key=e.key||ia,this._limit=e.limit||oa}setupOnce(){let e=x().getClient();!e||Pe((n,r)=>{let i=x().getIntegration(te);return i?sa(e.getOptions().stackParser,i._key,i._limit,n,r):n})}};te.__initStatic();function sa(t,e,n,r,i){if(!r.exception||!r.exception.values||!i||!W(i.originalException,Error))return r;let o=Mi(t,n,i.originalException,e);return r.exception.values=[...o,...r.exception.values],r}function Mi(t,e,n,r,i=[]){if(!W(n[r],Error)||i.length+1>=e)return i;let o=cr(t,n[r]);return Mi(t,e,n[r],r,[o,...i])}var ne=class{constructor(){ne.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=ne.id}setupOnce(){Pe(e=>{if(x().getIntegration(ne)){if(!g.navigator&&!g.location&&!g.document)return e;let n=e.request&&e.request.url||g.location&&g.location.href,{referrer:r}=g.document||{},{userAgent:i}=g.navigator||{},o={...e.request&&e.request.headers,...r&&{Referer:r},...i&&{"User-Agent":i}},s={...e.request,...n&&{url:n},headers:o};return{...e,request:s}}return e})}};ne.__initStatic();var re=class{constructor(){re.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=re.id}setupOnce(e,n){let r=i=>{if(i.type)return i;let o=n().getIntegration(re);if(o){try{if(aa(i,o._previousEvent))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{return o._previousEvent=i}return o._previousEvent=i}return i};r.id=this.name,e(r)}};re.__initStatic();function aa(t,e){return e?!!(ca(t,e)||ua(t,e)):!1}function ca(t,e){let n=t.message,r=e.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Li(t,e)||!Oi(t,e))}function ua(t,e){let n=Ii(e),r=Ii(t);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Li(t,e)||!Oi(t,e))}function Oi(t,e){let n=ki(t),r=ki(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){let o=r[i],s=n[i];if(o.filename!==s.filename||o.lineno!==s.lineno||o.colno!==s.colno||o.function!==s.function)return!1}return!0}function Li(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Ii(t){return t.exception&&t.exception.values&&t.exception.values[0]}function ki(t){let e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch{return}}var Ci=[new Ve.InboundFilters,new Ve.FunctionToString,new he,new pe,new F,new te,new re,new ne];function fr(t={}){t.defaultIntegrations===void 0&&(t.defaultIntegrations=Ci),t.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(t.release=__SENTRY_RELEASE__),g.SENTRY_RELEASE&&g.SENTRY_RELEASE.id&&(t.release=g.SENTRY_RELEASE.id)),t.autoSessionTracking===void 0&&(t.autoSessionTracking=!0),t.sendClientReports===void 0&&(t.sendClientReports=!0);let e={...t,stackParser:Cn(t.stackParser||Si),integrations:tr(t),transport:t.transport||(Gt()?xi:wi)};rr(an,e),t.autoSessionTracking&&la()}function Ai(t){t.startSession({ignoreDuration:!0}),t.captureSession()}function la(){if(typeof g.document>"u"){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&p.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}let t=x();!t.captureSession||(Ai(t),V("history",({from:e,to:n})=>{e===void 0||e===n||Ai(x())}))}var pr={};jr(pr,{Breadcrumbs:()=>pe,Dedupe:()=>re,GlobalHandlers:()=>F,HttpContext:()=>ne,LinkedErrors:()=>te,TryCatch:()=>he});var Pi={};g.Sentry&&g.Sentry.Integrations&&(Pi=g.Sentry.Integrations);var Gd={...Pi,...Ve,...pr};var Be={name:"__MSG_appName__",description:"__MSG_appDesc__",short_name:"__MSG_appShortName_",homepage_url:"https://chrome.google.com/webstore/detail/dictionary/nhbchcfeodkcblfpdjdhelcfbefefmag",__package_name__:"dictionary","__comment:version__":"Firefox does not support leading zeros in versions",version:"23.11.11",__sentry_dsn__:"https://b1d81a9e5f1546f79885a473ce33128c@o526305.ingest.sentry.io/6244539",manifest_version:3,default_locale:"en",author:"Justice Ogbonna",permissions:["declarativeNetRequest","contextMenus","storage","cookies"],declarative_net_request:{rule_resources:[{id:"ruleset_1",enabled:!0,path:"assets/rules.json"}]},host_permissions:["*://*/*"],action:{default_icon:{"16":"assets/logo-16x16.png","24":"assets/logo-24x24.png","32":"assets/logo-32x32.png"},default_title:"__MSG_appName__",default_popup:"popup/popup.html"},content_scripts:[{matches:["http://*/*","https://*/*"],all_frames:!0,js:["content-script/content-script.js"],css:["content-script/content-script.css"],run_at:"document_start"}],icons:{"16":"assets/logo-16x16.png","32":"assets/logo-32x32.png","48":"assets/logo-48x48.png","128":"assets/logo-128x128.png"},web_accessible_resources:[{resources:["assets/logo-24x24.png"],matches:["<all_urls>"]},{resources:["content-script/winbox.css"],matches:["<all_urls>"]}],options_page:"options-page/options.html",background:{service_worker:"background-script/background.js",__firefox__persistent:"false"},__firefox__key:"",__firefox__browser_specific_settings:{gecko:{id:"no-reply@justiceo.com"}}};var Ui=Be.__package_name__,je=class{constructor(e){this.tag="";this.debug=(...e)=>this.internalLog(3,...e);this.log=(...e)=>this.internalLog(2,...e);this.warn=(...e)=>this.internalLog(1,...e);this.error=(...e)=>this.internalLog(0,...e);this.tag=Ui+"."+(typeof e=="string"?e:e.constructor.name),IS_DEV_BUILD||this.initSentry(),this.listenForBgLogs()}initSentry(){fr({dsn:Be.__sentry_dsn__,tracesSampleRate:.1,release:Ui+"@"+Be.version,environment:"PROD"})}listenForBgLogs(){chrome.runtime.onMessage.addListener((e,n)=>{n.id!==chrome.runtime.id||e.action!="log"||this.internalLogTagOverride(e.data.level,e.data.tag,...e.data.messages)})}internalLog(e,...n){this.internalLogTagOverride(e,this.tag,...n)}internalLogTagOverride(e,n,...r){let i=new Date(Date.now()),o=["%c%s %s","color: blue",`[${i.getHours()}:${i.getMinutes()}:${i.getSeconds()}]`,n,...r];if(IS_DEV_BUILD)switch(e){case 3:console.debug(...o);break;case 1:console.warn(...o);break;case 2:console.log(...o);break;case 0:console.error(...o);break}else{switch(e){case 1:tn(o.join(" "));break;case 0:it(o.join(" "));break}return}}};var Bi=document.createElement("div");Bi.innerHTML='<div class=wb-header><div class=wb-control><span title="Minimize" class=wb-min></span><span title="Maximize" class=wb-max></span><span title="Fullscreen" class=wb-full></span><span title="Close" class=wb-close></span></div><div class=wb-drag><div class=wb-icon></div><div class=wb-title></div></div></div><div class=wb-body></div><div class=wb-footer><feedback-form size="inline"></feedback-form></div><div class=wb-n></div><div class=wb-s></div><div class=wb-w></div><div class=wb-e></div><div class=wb-nw></div><div class=wb-ne></div><div class=wb-se></div><div class=wb-sw></div>';function ji(t){return(t||Bi).cloneNode(!0)}var zi=`
  .winbox {
    position: fixed;
    left: 0;
    top: 0;
    background: #0050ff;
    box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
    /* using transform make contents blur when applied and requires more gpu memory */
    transition: width 0.3s, height 0.3s, left 0.3s, top 0.3s;
    transition-timing-function: cubic-bezier(0.3, 1, 0.3, 1);
    /* contain "strict" does not make overflow contents selectable */
    contain: layout size;
    /* explicitly set text align to left fixes an issue with iframes alignment when centered */
    text-align: left;
    /* workaround for using passive listeners */
    touch-action: none;
  }
  .wb-header {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 35px;
    line-height: 35px;
    color: #fff;
    overflow: hidden;
    z-index: 1;
  }
  .wb-body {
    position: absolute;
    top: 35px;
    left: 0;
    right: 0;
    bottom: 0;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
    overflow-scrolling: touch;
    will-change: contents;
    background: #fff;
    /* when no border is set there is some thin line visible */
    /* always hide top border visually */
    margin-top: 0 !important;
    contain: strict;
    z-index: 0;
  }
  .wb-footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    display: none;
  }
  .winbox.show-footer .wb-body {
    bottom: 35px; /* height of footer */
  }
  .winbox.show-footer .wb-footer {
    display: block;
  }
  body > .wb-body {
    position: relative;
    display: inline-block;
    visibility: hidden;
    contain: none;
  }
  .wb-drag {
    height: 100%;
    padding-left: 10px;
    cursor: move;
  }
  .wb-title {
    font-family: Arial, sans-serif;
    font-size: 14px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .wb-icon {
    display: none;
    width: 20px;
    height: 100%;
    margin: -1px 8px 0 -3px;
    float: left;
    background-repeat: no-repeat;
    background-size: 100%;
    background-position: center;
  }
  .wb-n {
    position: absolute;
    top: -5px;
    left: 0;
    right: 0;
    height: 10px;
    cursor: n-resize;
    z-index: 2;
  }
  .wb-e {
    position: absolute;
    top: 0;
    right: -5px;
    bottom: 0;
    width: 10px;
    cursor: w-resize;
    z-index: 2;
  }
  .wb-s {
    position: absolute;
    bottom: -5px;
    left: 0;
    right: 0;
    height: 10px;
    cursor: n-resize;
    z-index: 2;
  }
  .wb-w {
    position: absolute;
    top: 0;
    left: -5px;
    bottom: 0;
    width: 10px;
    cursor: w-resize;
    z-index: 2;
  }
  .wb-nw {
    position: absolute;
    top: -5px;
    left: -5px;
    width: 15px;
    height: 15px;
    cursor: nw-resize;
    z-index: 2;
  }
  .wb-ne {
    position: absolute;
    top: -5px;
    right: -5px;
    width: 15px;
    height: 15px;
    cursor: ne-resize;
    z-index: 2;
  }
  .wb-sw {
    position: absolute;
    bottom: -5px;
    left: -5px;
    width: 15px;
    height: 15px;
    cursor: ne-resize;
    z-index: 2;
  }
  .wb-se {
    position: absolute;
    bottom: -5px;
    right: -5px;
    width: 15px;
    height: 15px;
    cursor: nw-resize;
    z-index: 2;
  }
  .wb-control {
    float: right;
    height: 100%;
    max-width: 100%;
    text-align: center;
  }
  .wb-control * {
    display: inline-block;
    width: 30px;
    height: 100%;
    max-width: 100%;
    background-position: center;
    background-repeat: no-repeat;
    cursor: pointer;
  }
  .wb-min {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAyIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNOCAwaDdhMSAxIDAgMCAxIDAgMkgxYTEgMSAwIDAgMSAwLTJoN3oiLz48L3N2Zz4=);
    background-size: 14px auto;
    background-position: center calc(50% + 6px);
  }
  .wb-max {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9IiNmZmYiIHZpZXdCb3g9IjAgMCA5NiA5NiI+PHBhdGggZD0iTTIwIDcxLjMxMUMxNS4zNCA2OS42NyAxMiA2NS4yMyAxMiA2MFYyMGMwLTYuNjMgNS4zNy0xMiAxMi0xMmg0MGM1LjIzIDAgOS42NyAzLjM0IDExLjMxMSA4SDI0Yy0yLjIxIDAtNCAxLjc5LTQgNHY1MS4zMTF6Ii8+PHBhdGggZD0iTTkyIDc2VjM2YzAtNi42My01LjM3LTEyLTEyLTEySDQwYy02LjYzIDAtMTIgNS4zNy0xMiAxMnY0MGMwIDYuNjMgNS4zNyAxMiAxMiAxMmg0MGM2LjYzIDAgMTItNS4zNyAxMi0xMnptLTUyIDRjLTIuMjEgMC00LTEuNzktNC00VjM2YzAtMi4yMSAxLjc5LTQgNC00aDQwYzIuMjEgMCA0IDEuNzkgNCA0djQwYzAgMi4yMS0xLjc5IDQtNCA0SDQweiIvPjwvc3ZnPg==);
    background-size: 17px auto;
  }
  .wb-close {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xIC0xIDE4IDE4Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJtMS42MTMuMjEuMDk0LjA4M0w4IDYuNTg1IDE0LjI5My4yOTNsLjA5NC0uMDgzYTEgMSAwIDAgMSAxLjQwMyAxLjQwM2wtLjA4My4wOTRMOS40MTUgOGw2LjI5MiA2LjI5M2ExIDEgMCAwIDEtMS4zMiAxLjQ5N2wtLjA5NC0uMDgzTDggOS40MTVsLTYuMjkzIDYuMjkyLS4wOTQuMDgzQTEgMSAwIDAgMSAuMjEgMTQuMzg3bC4wODMtLjA5NEw2LjU4NSA4IC4yOTMgMS43MDdBMSAxIDAgMCAxIDEuNjEzLjIxeiIvPjwvc3ZnPg==);
    background-size: 15px auto;
    background-position: 5px center;
  }
  .wb-full {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjIuNSIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNOCAzSDVhMiAyIDAgMCAwLTIgMnYzbTE4IDBWNWEyIDIgMCAwIDAtMi0yaC0zbTAgMThoM2EyIDIgMCAwIDAgMi0ydi0zTTMgMTZ2M2EyIDIgMCAwIDAgMiAyaDMiLz48L3N2Zz4=);
    background-size: 16px auto;
  }
  .wb-nav-away {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgLTk2MCA5NjAgOTYwIiB3aWR0aD0iMjQiPjxwYXRoIGQ9Ik0yMTIuMzA5LTE0MC4wMDFxLTMwLjMwOCAwLTUxLjMwOC0yMXQtMjEtNTEuMzA4di01MzUuMzgycTAtMzAuMzA4IDIxLTUxLjMwOHQ1MS4zMDgtMjFoMjUyLjMwNVYtNzYwSDIxMi4zMDlxLTQuNjE2IDAtOC40NjMgMy44NDYtMy44NDYgMy44NDctMy44NDYgOC40NjN2NTM1LjM4MnEwIDQuNjE2IDMuODQ2IDguNDYzIDMuODQ3IDMuODQ2IDguNDYzIDMuODQ2aDUzNS4zODJxNC42MTYgMCA4LjQ2My0zLjg0NiAzLjg0Ni0zLjg0NyAzLjg0Ni04LjQ2M3YtMjUyLjMwNWg1OS45OTl2MjUyLjMwNXEwIDMwLjMwOC0yMSA1MS4zMDh0LTUxLjMwOCAyMUgyMTIuMzA5Wm0xNzYuNDYtMjA2LjYxNS00Mi4xNTMtNDIuMTUzTDcxNy44NDctNzYwSDU2MHYtNTkuOTk5aDI1OS45OTlWLTU2MEg3NjB2LTE1Ny44NDdMMzg4Ljc2OS0zNDYuNjE2WiIvPjwvc3ZnPg==);
    
    background-size: 20px auto;
    filter: invert(1);
  }
  /*
  .winbox:not(.max) .wb-max {
    background-image: url(@restore);
    background-size: 20px auto;
    background-position: center bottom 5px;
  }
  */
  /*
  .winbox:fullscreen{
    transition: none !important;
  }
  .winbox:fullscreen .wb-full{
    background-image: url(@minimize);
  }
  .winbox:fullscreen > div,
  .winbox:fullscreen .wb-title,
  */
  .winbox.modal .wb-body ~ div,
  .winbox.modal .wb-drag,
  .winbox.min .wb-body ~ div,
  .winbox.max .wb-body ~ div {
    pointer-events: none;
  }
  .winbox.max .wb-drag {
    cursor: default;
  }
  .winbox.min .wb-full,
  .winbox.min .wb-min {
    display: none;
  }
  .winbox.min .wb-drag {
    cursor: default;
  }
  .winbox.min .wb-body > * {
    display: none;
  }
  .winbox.hide {
    display: none;
  }
  .winbox.max {
    box-shadow: none;
  }
  .winbox.max .wb-body {
    margin: 0 !important;
  }
  .winbox iframe {
    position: absolute;
    width: 100%;
    height: 100%;
    border: 0;
  }
  body.wb-lock .winbox {
    will-change: left, top, width, height;
    transition: none;
  }
  body.wb-lock iframe {
    pointer-events: none;
  }
  .winbox.modal:before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: inherit;
    border-radius: inherit;
  }
  .winbox.modal:after {
    content: '';
    position: absolute;
    top: -50vh;
    left: -50vw;
    right: -50vw;
    bottom: -50vh;
    background: #0d1117;
    animation: wb-fade-in 0.2s ease-out forwards;
    z-index: -1;
  }
  .winbox.modal .wb-min,
  .winbox.modal .wb-max,
  .winbox.modal .wb-full {
    display: none;
  }
  @keyframes wb-fade-in {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 0.85;
    }
  }
  .no-animation {
    transition: none;
  }
  .no-shadow {
    box-shadow: none;
  }
  .no-header .wb-header {
    display: none;
  }
  .no-header .wb-body {
    top: 0;
  }
  .no-min .wb-min {
    display: none;
  }
  .no-max .wb-max {
    display: none;
  }
  .no-full .wb-full {
    display: none;
  }
  .no-close .wb-close {
    display: none;
  }
  .no-resize .wb-body ~ div {
    display: none;
  }
  .no-move:not(.min) .wb-title {
    pointer-events: none;
  }
  .wb-body .wb-hide {
    display: none;
  }
  .wb-show {
    display: none;
  }
  .wb-body .wb-show {
    display: revert;
  }
`;function G(t,e,n,r){t&&t.addEventListener(e,n,r||!1)}function Rt(t,e,n,r){t&&t.removeEventListener(e,n,r||!1)}function st(t,e){t.stopPropagation(),t.cancelable&&t.preventDefault()}function X(t,e){return t.getElementsByClassName(e)[0]}function hr(t,e){t.classList.add(e)}function Fi(t,e){return t.classList.contains(e)}function mr(t,e){t.classList.remove(e)}function B(t,e,n){n=""+n,t["_s_"+e]!==n&&(t.style.setProperty(e,n),t["_s_"+e]=n)}function Gi(t,e){let n=t.firstChild;n?n.nodeValue=e:t.textContent=e}var un=!1,ct=[],Nt={capture:!0,passive:!0},ie,pa=0,Dt=10,at,ze,Ne,Hi,De,Me,oe=class{constructor(e,n){if(!(this instanceof oe))return new oe(e);ie||ha();let r,i,o,s,a,c,u,d,l,f,h,m,_,y,b,E,w,v,T,_e,I,U,O,L,D,C,se,Z,H,A,ye,J,Ie,ke,lt,Ot,Lt,Dr,Mr,Ir,kr,Or,Lr,Ar,Cr,Pr,Ur;if(e&&(n&&(a=e,e=n),typeof e=="string"?a=e:(r=e.id,i=e.index,o=e.root,s=e.template,a=a||e.title,c=e.icon,u=e.mount,d=e.html,l=e.url,f=e.shadowel,m=e.framename,_=e.cssurl,y=e.width,b=e.height,E=e.minwidth,w=e.minheight,v=e.maxwidth,T=e.maxheight,_e=e.autosize,se=e.min,Z=e.max,H=e.hidden,A=e.modal,I=e.x||(A?"center":0),U=e.y||(A?"center":0),O=e.top,L=e.left,D=e.bottom,C=e.right,ye=e.background,J=e.border,Ie=e.header,ke=e.class,Ot=e.onclose,Lt=e.onfocus,Dr=e.onblur,Mr=e.onmove,Ir=e.onresize,kr=e.onfullscreen,Or=e.onmaximize,Lr=e.onminimize,Ar=e.onrestore,Cr=e.onhide,Pr=e.onshow,Ur=e.onload)),this.dom=ji(s),this.dom.id=this.id=r||"winbox-"+ ++pa,this.dom.className="winbox"+(ke?" "+(typeof ke=="string"?ke:ke.join(" ")):"")+(A?" modal":""),this.dom.winbox=this,this.window=this.dom,this.body=X(this.dom,"wb-body"),this.header=Ie||35,(i||i===0)&&(Dt=i),ye&&this.setBackground(ye),J?B(this.body,"margin",J+(isNaN(J)?"":"px")):J=0,Ie){let ae=X(this.dom,"wb-header");B(ae,"height",Ie+"px"),B(ae,"line-height",Ie+"px"),B(this.body,"top",Ie+"px")}a&&this.setTitle(a),c&&this.setIcon(c),u?this.mount(u):d?this.body.innerHTML=d:l&&this.setUrl(l,Ur),O=O?P(O,Me):0,D=D?P(D,Me):0,L=L?P(L,De):0,C=C?P(C,De):0;let wn=De-L-C,Sn=Me-O-D;if(v=v?P(v,wn):wn,T=T?P(T,Sn):Sn,E=E?P(E,v):150,w=w?P(w,T):this.header,_e?((o||ie).appendChild(this.body),y=Math.max(Math.min(this.body.clientWidth+J*2+1,v),E),b=Math.max(Math.min(this.body.clientHeight+this.header+J+1,T),w),this.dom.appendChild(this.body)):(y=y?P(y,v):Math.max(v/2,E)|0,b=b?P(b,T):Math.max(T/2,w)|0),I=I?P(I,wn,y):L,U=U?P(U,Sn,b):O,this.x=I,this.y=U,this.width=y,this.height=b,this.minwidth=E,this.minheight=w,this.maxwidth=v,this.maxheight=T,this.top=O,this.right=C,this.bottom=D,this.left=L,this.index=i,this.min=!1,this.max=!1,this.full=!1,this.hidden=!1,this.focused=!1,this.onclose=Ot,this.onfocus=Lt,this.onblur=Dr,this.onmove=Mr,this.onresize=Ir,this.onfullscreen=kr,this.onmaximize=Or,this.onminimize=Lr,this.onrestore=Ar,this.onhide=Cr,this.onshow=Pr,Z?this.maximize():se?this.minimize():this.resize().move(),H?this.hide():(this.focus(),(i||i===0)&&(this.index=i,i>Dt&&(Dt=i))),B(this.shadowdom?this.shadowdom:this.dom,"z-index",i),ma(this),f){let ae=document.createElement(f);ae.style.position="absolute";let Br=document.createElement("style");if(Br.textContent=zi,ae.appendChild(Br),_){let dt=document.createElement("link");dt.rel="stylesheet",dt.type="text/css",dt.href=_,dt.itemprop="url",ae.appendChild(dt)}ae.appendChild(this.dom),ae.attachShadow({mode:"open"}).innerHTML="<slot></slot>",this.shadowdom=ae,(o||ie).appendChild(ae)}else(o||ie).appendChild(this.dom);(lt=e.oncreate)&&lt.call(this,e)}static new(e){return new oe(e)}mount(e){return this.unmount(),e._backstore||(e._backstore=e.parentNode),this.body.textContent="",this.body.appendChild(e),this}unmount(e){let n=this.body.firstChild;if(n){let r=e||n._backstore;r&&r.appendChild(n),n._backstore=e}return this}setTitle(e){let n=X(this.dom,"wb-title");return Gi(n,this.title=e),this}setIcon(e){let n=X(this.dom,"wb-icon");return B(n,"background-image","url("+e+")"),B(n,"display","inline-block"),this}setBackground(e){return B(this.dom,"background",e),this}setUrl(e,n){let r=this.body.firstChild;if(r&&r.tagName.toLowerCase()==="iframe")r.src=e;else{let i=this.framename??"";this.body.innerHTML=`<iframe name="${i}" src="${e}"></iframe>`,n&&(this.body.firstChild.onload=n)}return this}focus(e){return e===!1?this.blur():(ze!==this&&this.dom&&(ze&&ze.blur(),B(this.shadowdom?this.shadowdom:this.dom,"z-index",++Dt),this.index=Dt,this.addClass("focus"),ze=this,this.focused=!0,this.onfocus&&this.onfocus()),this)}blur(e){return e===!1?this.focus():(ze===this&&(this.removeClass("focus"),this.focused=!1,this.onblur&&this.onblur(),ze=null),this)}hide(e){if(e===!1)return this.show();if(!this.hidden)return this.onhide&&this.onhide(),this.hidden=!0,this.addClass("hide")}show(e){if(e===!1)return this.hide();if(this.hidden)return this.onshow&&this.onshow(),this.hidden=!1,this.removeClass("hide")}minimize(e){return e===!1?this.restore():(at&&dn(),this.max&&(this.removeClass("max"),this.max=!1),this.min||(ct.push(this),gr(),this.dom.title=this.title,this.addClass("min"),this.min=!0,this.onminimize&&this.onminimize()),this)}restore(){return at&&dn(),this.min&&(ln(this),this.resize().move(),this.onrestore&&this.onrestore()),this.max&&(this.max=!1,this.removeClass("max").resize().move(),this.onrestore&&this.onrestore()),this}maximize(e){return e===!1?this.restore():(at&&dn(),this.min&&ln(this),this.max||(this.addClass("max").resize(De-this.left-this.right,Me-this.top-this.bottom,!0).move(this.left,this.top,!0),this.max=!0,this.onmaximize&&this.onmaximize()),this)}fullscreen(e){if(this.min&&(ln(this),this.resize().move()),!at||!dn())this.body[Ne](),at=this,this.full=!0,this.onfullscreen&&this.onfullscreen();else if(e===!1)return this.restore();return this}close(e){if(this.onclose&&this.onclose(e))return!0;this.min&&ln(this),this.unmount(),this.dom.remove(),this.dom.textContent="",this.dom.winbox=null,this.body=null,this.dom=null,ze===this&&(ze=null)}move(e,n,r){return!e&&e!==0?(e=this.x,n=this.y):r||(this.x=e?e=P(e,De-this.left-this.right,this.width):0,this.y=n?n=P(n,Me-this.top-this.bottom,this.height):0),B(this.dom,"left",e+"px"),B(this.dom,"top",n+"px"),this.onmove&&this.onmove(e,n),this}resize(e,n,r){return!e&&e!==0?(e=this.width,n=this.height):r||(this.width=e?e=P(e,this.maxwidth):0,this.height=n?n=P(n,this.maxheight):0,e=Math.max(e,this.minwidth),n=Math.max(n,this.minheight)),B(this.dom,"width",e+"px"),B(this.dom,"height",n+"px"),this.onresize&&this.onresize(e,n),this}addControl(e){let n=e.class,r=e.image,i=e.click,o=e.index,s=e.title,a=document.createElement("span"),c=X(this.dom,"wb-control"),u=this;return n&&(a.className=n),r&&B(a,"background-image","url("+r+")"),i&&(a.onclick=function(d){i.call(this,d,u)}),s&&(a.title=s),c.insertBefore(a,c.childNodes[o||0]),this}removeControl(e){return e=X(this.dom,e),e&&e.remove(),this}addClass(e){return hr(this.dom,e),this}removeClass(e){return mr(this.dom,e),this}hasClass(e){return Fi(this.dom,e)}toggleClass(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)}};function P(t,e,n){if(typeof t=="string")if(t==="center")t=(e-n)/2|0;else if(t==="right"||t==="bottom")t=e-n;else{let r=parseFloat(t);(""+r!==t&&t.substring((""+r).length))==="%"?t=e/100*r|0:t=r}return t}function ha(){ie=document.body,ie[Ne="requestFullscreen"]||ie[Ne="msRequestFullscreen"]||ie[Ne="webkitRequestFullscreen"]||ie[Ne="mozRequestFullscreen"]||(Ne=""),Hi=Ne&&Ne.replace("request","exit").replace("mozRequest","mozCancel").replace("Request","Exit"),G(window,"resize",function(){Yi(),gr()}),Yi()}function ma(t){Re(t,"drag"),Re(t,"n"),Re(t,"s"),Re(t,"w"),Re(t,"e"),Re(t,"nw"),Re(t,"ne"),Re(t,"se"),Re(t,"sw"),G(X(t.dom,"wb-min"),"click",function(e){st(e),t.min?t.focus().restore():t.blur().minimize()}),G(X(t.dom,"wb-max"),"click",function(e){t.max?t.restore():t.maximize()}),Ne?G(X(t.dom,"wb-full"),"click",function(e){t.fullscreen()}):t.addClass("no-full"),G(X(t.dom,"wb-close"),"click",function(e){st(e),t.close()||(t=null)}),G(t.dom,"click",function(e){t.focus()})}function ln(t){ct.splice(ct.indexOf(t),1),gr(),t.removeClass("min"),t.min=!1,t.dom.title=""}function gr(){let t=ct.length,e={},n={};for(let r=0,i,o;r<t;r++)i=ct[r],o=(i.left||i.right)+":"+(i.top||i.bottom),n[o]?n[o]++:(e[o]=0,n[o]=1);for(let r=0,i,o,s;r<t;r++)i=ct[r],o=(i.left||i.right)+":"+(i.top||i.bottom),s=Math.min((De-i.left-i.right)/n[o],250),i.resize(s+1|0,i.header,!0).move(i.left+e[o]*s|0,Me-i.bottom-i.header,!0),e[o]++}function Re(t,e){let n=X(t.dom,"wb-"+e);if(!n)return;let r,i,o,s,a,c,u=0;G(n,"mousedown",l),G(n,"touchstart",l,Nt);function d(){s=requestAnimationFrame(d),c&&(t.resize(),c=!1),a&&(t.move(),a=!1)}function l(m){if(st(m),t.focus(),e==="drag"){if(t.min){t.restore();return}let _=Date.now(),y=_-u;if(u=_,y<300&&!t.dom.classList.contains("no-max")){t.max?t.restore():t.maximize();return}}!t.max&&!t.min&&(hr(ie,"wb-lock"),un&&d(),(r=m.touches)&&(r=r[0])?(m=r,G(window,"touchmove",f,Nt),G(window,"touchend",h,Nt)):(G(window,"mousemove",f),G(window,"mouseup",h)),i=m.pageX,o=m.pageY)}function f(m){st(m),r&&(m=m.touches[0]);let _=m.pageX,y=m.pageY,b=_-i,E=y-o,w=t.width,v=t.height,T=t.x,_e=t.y,I,U,O,L;e==="drag"?(t.x+=b,t.y+=E,O=L=1):(e==="e"||e==="se"||e==="ne"?(t.width+=b,I=1):(e==="w"||e==="sw"||e==="nw")&&(t.x+=b,t.width-=b,I=1,O=1),e==="s"||e==="se"||e==="sw"?(t.height+=E,U=1):(e==="n"||e==="ne"||e==="nw")&&(t.y+=E,t.height-=E,U=1,L=1)),I&&(t.width=Math.max(Math.min(t.width,t.maxwidth,De-t.x-t.right),t.minwidth),I=t.width!==w),U&&(t.height=Math.max(Math.min(t.height,t.maxheight,Me-t.y-t.bottom),t.minheight),U=t.height!==v),(I||U)&&(un?c=!0:t.resize()),O&&(t.x=Math.max(Math.min(t.x,De-t.width-t.right),t.left),O=t.x!==T),L&&(t.y=Math.max(Math.min(t.y,Me-t.height-t.bottom),t.top),L=t.y!==_e),(O||L)&&(un?a=!0:t.move()),(I||O)&&(i=_),(U||L)&&(o=y)}function h(m){st(m),mr(ie,"wb-lock"),un&&cancelAnimationFrame(s),r?(Rt(window,"touchmove",f,Nt),Rt(window,"touchend",h,Nt)):(Rt(window,"mousemove",f),Rt(window,"mouseup",h))}}function Yi(){let t=document.documentElement;De=t.clientWidth,Me=t.clientHeight}function ga(){return document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement}function dn(){if(at.full=!1,ga())return document[Hi](),!0}function hn(t){return t.split("-")[1]}function qi(t){return t==="y"?"height":"width"}function Xe(t){return t.split("-")[0]}function mn(t){return["top","bottom"].includes(Xe(t))?"x":"y"}function $i(t,e,n){let{reference:r,floating:i}=t,o=r.x+r.width/2-i.width/2,s=r.y+r.height/2-i.height/2,a=mn(e),c=qi(a),u=r[c]/2-i[c]/2,d=a==="x",l;switch(Xe(e)){case"top":l={x:o,y:r.y-i.height};break;case"bottom":l={x:o,y:r.y+r.height};break;case"right":l={x:r.x+r.width,y:s};break;case"left":l={x:r.x-i.width,y:s};break;default:l={x:r.x,y:r.y}}switch(hn(e)){case"start":l[a]-=u*(n&&d?-1:1);break;case"end":l[a]+=u*(n&&d?-1:1)}return l}var Vi=async(t,e,n)=>{let{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(e)),u=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:l}=$i(u,r,c),f=r,h={},m=0;for(let _=0;_<a.length;_++){let{name:y,fn:b}=a[_],{x:E,y:w,data:v,reset:T}=await b({x:d,y:l,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:u,platform:s,elements:{reference:t,floating:e}});d=E??d,l=w??l,h={...h,[y]:{...h[y],...v}},T&&m<=50&&(m++,typeof T=="object"&&(T.placement&&(f=T.placement),T.rects&&(u=T.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):T.rects),{x:d,y:l}=$i(u,f,c)),_=-1)}return{x:d,y:l,placement:f,strategy:i,middlewareData:h}};function _a(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function fn(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function yr(t,e){var n;e===void 0&&(e={});let{x:r,y:i,platform:o,rects:s,elements:a,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:l="floating",altBoundary:f=!1,padding:h=0}=e,m=_a(h),_=a[f?l==="floating"?"reference":"floating":l],y=fn(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(_)))==null||n?_:_.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:c})),b=l==="floating"?{...s.floating,x:r,y:i}:s.reference,E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),w=await(o.isElement==null?void 0:o.isElement(E))&&await(o.getScale==null?void 0:o.getScale(E))||{x:1,y:1},v=fn(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:b,offsetParent:E,strategy:c}):b);return{top:(y.top-v.top+m.top)/w.y,bottom:(v.bottom-y.bottom+m.bottom)/w.y,left:(y.left-v.left+m.left)/w.x,right:(v.right-y.right+m.right)/w.x}}var ya=Math.min,Ea=Math.max;function Wi(t,e,n){return Ea(t,ya(e,n))}var ba=["top","right","bottom","left"],Qd=ba.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]),xa={left:"right",right:"left",bottom:"top",top:"bottom"};function pn(t){return t.replace(/left|right|bottom|top/g,e=>xa[e])}function wa(t,e,n){n===void 0&&(n=!1);let r=hn(t),i=mn(t),o=qi(i),s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=pn(s)),{main:s,cross:pn(s)}}var Sa={start:"end",end:"start"};function _r(t){return t.replace(/start|end/g,e=>Sa[e])}var Er=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;let{placement:r,middlewareData:i,rects:o,initialPlacement:s,platform:a,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:l,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:m=!0,..._}=t,y=Xe(r),b=Xe(s)===s,E=await(a.isRTL==null?void 0:a.isRTL(c.floating)),w=l||(b||!m?[pn(s)]:function(D){let C=pn(D);return[_r(D),C,_r(C)]}(s));l||h==="none"||w.push(...function(D,C,se,Z){let H=hn(D),A=function(ye,J,Ie){let ke=["left","right"],lt=["right","left"],Ot=["top","bottom"],Lt=["bottom","top"];switch(ye){case"top":case"bottom":return Ie?J?lt:ke:J?ke:lt;case"left":case"right":return J?Ot:Lt;default:return[]}}(Xe(D),se==="start",Z);return H&&(A=A.map(ye=>ye+"-"+H),C&&(A=A.concat(A.map(_r)))),A}(s,m,h,E));let v=[s,...w],T=await yr(e,_),_e=[],I=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&_e.push(T[y]),d){let{main:D,cross:C}=wa(r,o,E);_e.push(T[D],T[C])}if(I=[...I,{placement:r,overflows:_e}],!_e.every(D=>D<=0)){var U,O;let D=(((U=i.flip)==null?void 0:U.index)||0)+1,C=v[D];if(C)return{data:{index:D,overflows:I},reset:{placement:C}};let se=(O=I.filter(Z=>Z.overflows[0]<=0).sort((Z,H)=>Z.overflows[1]-H.overflows[1])[0])==null?void 0:O.placement;if(!se)switch(f){case"bestFit":{var L;let Z=(L=I.map(H=>[H.placement,H.overflows.filter(A=>A>0).reduce((A,ye)=>A+ye,0)]).sort((H,A)=>H[1]-A[1])[0])==null?void 0:L[0];Z&&(se=Z);break}case"initialPlacement":se=s}if(r!==se)return{reset:{placement:se}}}return{}}}};var br=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){let{x:n,y:r}=e,i=await async function(o,s){let{placement:a,platform:c,elements:u}=o,d=await(c.isRTL==null?void 0:c.isRTL(u.floating)),l=Xe(a),f=hn(a),h=mn(a)==="x",m=["left","top"].includes(l)?-1:1,_=d&&h?-1:1,y=typeof s=="function"?s(o):s,{mainAxis:b,crossAxis:E,alignmentAxis:w}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...y};return f&&typeof w=="number"&&(E=f==="end"?-1*w:w),h?{x:E*_,y:b*m}:{x:b*m,y:E*_}}(e,t);return{x:n+i.x,y:r+i.y,data:i}}}};function va(t){return t==="x"?"y":"x"}var xr=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){let{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:y=>{let{x:b,y:E}=y;return{x:b,y:E}}},...c}=t,u={x:n,y:r},d=await yr(e,c),l=mn(Xe(i)),f=va(l),h=u[l],m=u[f];if(o){let y=l==="y"?"bottom":"right";h=Wi(h+d[l==="y"?"top":"left"],h,h-d[y])}if(s){let y=f==="y"?"bottom":"right";m=Wi(m+d[f==="y"?"top":"left"],m,m-d[y])}let _=a.fn({...e,[l]:h,[f]:m});return{..._,data:{x:_.x-n,y:_.y-r}}}}};function Y(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function me(t){return Y(t).getComputedStyle(t)}var Xi=Math.min,Mt=Math.max,_n=Math.round;function eo(t){let e=me(t),n=parseFloat(e.width),r=parseFloat(e.height),i=t.offsetWidth,o=t.offsetHeight,s=_n(n)!==i||_n(r)!==o;return s&&(n=i,r=o),{width:n,height:r,fallback:s}}function Ye(t){return no(t)?(t.nodeName||"").toLowerCase():""}var gn;function to(){if(gn)return gn;let t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(gn=t.brands.map(e=>e.brand+"/"+e.version).join(" "),gn):navigator.userAgent}function ge(t){return t instanceof Y(t).HTMLElement}function Fe(t){return t instanceof Y(t).Element}function no(t){return t instanceof Y(t).Node}function Zi(t){return typeof ShadowRoot>"u"?!1:t instanceof Y(t).ShadowRoot||t instanceof ShadowRoot}function yn(t){let{overflow:e,overflowX:n,overflowY:r,display:i}=me(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Ta(t){return["table","td","th"].includes(Ye(t))}function wr(t){let e=/firefox/i.test(to()),n=me(t),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!r&&r!=="none"||e&&n.willChange==="filter"||e&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(i=>n.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{let o=n.contain;return o!=null&&o.includes(i)})}function Sr(){return/^((?!chrome|android).)*safari/i.test(to())}function vr(t){return["html","body","#document"].includes(Ye(t))}function ro(t){return Fe(t)?t:t.contextElement}var io={x:1,y:1};function ut(t){let e=ro(t);if(!ge(e))return io;let n=e.getBoundingClientRect(),{width:r,height:i,fallback:o}=eo(e),s=(o?_n(n.width):n.width)/r,a=(o?_n(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}function It(t,e,n,r){var i,o;e===void 0&&(e=!1),n===void 0&&(n=!1);let s=t.getBoundingClientRect(),a=ro(t),c=io;e&&(r?Fe(r)&&(c=ut(r)):c=ut(t));let u=a?Y(a):window,d=Sr()&&n,l=(s.left+(d&&((i=u.visualViewport)==null?void 0:i.offsetLeft)||0))/c.x,f=(s.top+(d&&((o=u.visualViewport)==null?void 0:o.offsetTop)||0))/c.y,h=s.width/c.x,m=s.height/c.y;if(a){let _=Y(a),y=r&&Fe(r)?Y(r):r,b=_.frameElement;for(;b&&r&&y!==_;){let E=ut(b),w=b.getBoundingClientRect(),v=getComputedStyle(b);w.x+=(b.clientLeft+parseFloat(v.paddingLeft))*E.x,w.y+=(b.clientTop+parseFloat(v.paddingTop))*E.y,l*=E.x,f*=E.y,h*=E.x,m*=E.y,l+=w.x,f+=w.y,b=Y(b).frameElement}}return{width:h,height:m,top:f,right:l+h,bottom:f+m,left:l,x:l,y:f}}function Ge(t){return((no(t)?t.ownerDocument:t.document)||window.document).documentElement}function En(t){return Fe(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function oo(t){return It(Ge(t)).left+En(t).scrollLeft}function kt(t){if(Ye(t)==="html")return t;let e=t.assignedSlot||t.parentNode||Zi(t)&&t.host||Ge(t);return Zi(e)?e.host:e}function so(t){let e=kt(t);return vr(e)?e.ownerDocument.body:ge(e)&&yn(e)?e:so(e)}function ao(t,e){var n;e===void 0&&(e=[]);let r=so(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=Y(r);return i?e.concat(o,o.visualViewport||[],yn(r)?r:[]):e.concat(r,ao(r))}function Ji(t,e,n){let r;if(e==="viewport")r=function(s,a){let c=Y(s),u=Ge(s),d=c.visualViewport,l=u.clientWidth,f=u.clientHeight,h=0,m=0;if(d){l=d.width,f=d.height;let _=Sr();(!_||_&&a==="fixed")&&(h=d.offsetLeft,m=d.offsetTop)}return{width:l,height:f,x:h,y:m}}(t,n);else if(e==="document")r=function(s){let a=Ge(s),c=En(s),u=s.ownerDocument.body,d=Mt(a.scrollWidth,a.clientWidth,u.scrollWidth,u.clientWidth),l=Mt(a.scrollHeight,a.clientHeight,u.scrollHeight,u.clientHeight),f=-c.scrollLeft+oo(s),h=-c.scrollTop;return me(u).direction==="rtl"&&(f+=Mt(a.clientWidth,u.clientWidth)-d),{width:d,height:l,x:f,y:h}}(Ge(t));else if(Fe(e))r=function(s,a){let c=It(s,!0,a==="fixed"),u=c.top+s.clientTop,d=c.left+s.clientLeft,l=ge(s)?ut(s):{x:1,y:1};return{width:s.clientWidth*l.x,height:s.clientHeight*l.y,x:d*l.x,y:u*l.y}}(e,n);else{let s={...e};if(Sr()){var i,o;let a=Y(t);s.x-=((i=a.visualViewport)==null?void 0:i.offsetLeft)||0,s.y-=((o=a.visualViewport)==null?void 0:o.offsetTop)||0}r=s}return fn(r)}function Ki(t,e){return ge(t)&&me(t).position!=="fixed"?e?e(t):t.offsetParent:null}function Qi(t,e){let n=Y(t),r=Ki(t,e);for(;r&&Ta(r)&&me(r).position==="static";)r=Ki(r,e);return r&&(Ye(r)==="html"||Ye(r)==="body"&&me(r).position==="static"&&!wr(r))?n:r||function(i){let o=kt(i);for(;ge(o)&&!vr(o);){if(wr(o))return o;o=kt(o)}return null}(t)||n}function Ra(t,e,n){let r=ge(e),i=Ge(e),o=It(t,!0,n==="fixed",e),s={scrollLeft:0,scrollTop:0},a={x:0,y:0};if(r||!r&&n!=="fixed")if((Ye(e)!=="body"||yn(i))&&(s=En(e)),ge(e)){let c=It(e,!0);a.x=c.x+e.clientLeft,a.y=c.y+e.clientTop}else i&&(a.x=oo(i));return{x:o.left+s.scrollLeft-a.x,y:o.top+s.scrollTop-a.y,width:o.width,height:o.height}}var Na={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t,o=n==="clippingAncestors"?function(u,d){let l=d.get(u);if(l)return l;let f=ao(u).filter(y=>Fe(y)&&Ye(y)!=="body"),h=null,m=me(u).position==="fixed",_=m?kt(u):u;for(;Fe(_)&&!vr(_);){let y=me(_),b=wr(_);y.position==="fixed"?h=null:(m?b||h:b||y.position!=="static"||!h||!["absolute","fixed"].includes(h.position))?h=y:f=f.filter(E=>E!==_),_=kt(_)}return d.set(u,f),f}(e,this._c):[].concat(n),s=[...o,r],a=s[0],c=s.reduce((u,d)=>{let l=Ji(e,d,i);return u.top=Mt(l.top,u.top),u.right=Xi(l.right,u.right),u.bottom=Xi(l.bottom,u.bottom),u.left=Mt(l.left,u.left),u},Ji(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:r}=t,i=ge(n),o=Ge(n);if(n===o)return e;let s={scrollLeft:0,scrollTop:0},a={x:1,y:1},c={x:0,y:0};if((i||!i&&r!=="fixed")&&((Ye(n)!=="body"||yn(o))&&(s=En(n)),ge(n))){let u=It(n);a=ut(n),c.x=u.x+n.clientLeft,c.y=u.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-s.scrollLeft*a.x+c.x,y:e.y*a.y-s.scrollTop*a.y+c.y}},isElement:Fe,getDimensions:function(t){return ge(t)?eo(t):t.getBoundingClientRect()},getOffsetParent:Qi,getDocumentElement:Ge,getScale:ut,async getElementRects(t){let{reference:e,floating:n,strategy:r}=t,i=this.getOffsetParent||Qi,o=this.getDimensions;return{reference:Ra(e,await i(n),r),floating:{x:0,y:0,...await o(n)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>me(t).direction==="rtl"};var co=(t,e,n)=>{let r=new Map,i={platform:Na,...n},o={...i.platform,_c:r};return Vi(t,e,{...i,platform:o})};var Da="Google";function bn(){let t=chrome.i18n.getMessage("define_cue");return{Google:{name:"Google",selector:"div[jsname=x3Eknd]",url:n=>`https://www.google.com/search?q=${t}+${n}`,applyCss:()=>{let n=document.createElement("style");n.textContent=`
                    div[jsname=KM35l], div[jsname=p0q1Sd],
                    .pronunciation_promo__pm-ctnr, .pronunciation_promo__pm-ml, 
                    #sfooter {
                        display: none !important;
                    }
                    body.srp {
                        overflow-x: hidden;
                        --center-width: 350px;
                    }  
                `,document.body.appendChild(n),document.body.querySelectorAll("a, [role=link]").forEach(r=>{!r.parentElement||(r.parentElement.style.textDecoration="none",r.parentElement.replaceChild(document.createTextNode(r.textContent),r))})}},DuckDuckGo:{name:"DuckDuckGo",selector:"div.ia-module--definitions",url:n=>`https://duckduckgo.com/?q=${t}+${n}`,applyCss:()=>{let n=document.createElement("style");n.textContent=`
                    div.ia-module--definitions {
                        border: none !important;
                        box-shadow: none !important;
                    }
                    .module--definitions__collapsed-group, 
                    .module__toggle,
                    .module--definitions__attribution {
                        display:none !important;
                    }
                    .module--definitions__group {
                        display: block !important;
                    }
                `,document.body.appendChild(n),document.body.querySelectorAll("a").forEach(r=>{r.parentElement?.replaceChild(document.createTextNode(r.textContent),r)})}}}[Da]}var xn=Be.__package_name__+"/mainframe";oe.prototype.getDom=function(){return this.dom};oe.prototype.startLoading=function(){this.dom.querySelector(".loading").style.display="block"};oe.prototype.stopLoading=function(){this.dom.querySelector(".loading").style.display="none"};var Tr=class{constructor(){this.logger=new je("previewr");this.engineConfig=bn();this.onMessageHandler=e=>{if(e.origin!==window.location.origin){this.logger.debug("Ignoring message from different origin",e.origin,e.data);return}if(e.data.application!=="dictionary"){this.logger.debug("Ignoring origin messsage not initiated by Dictionary");return}this.handleMessage(e.data)};this.onEscHandler=e=>{this.handleMessage({action:"escape",href:document.location.href,sourceFrame:xn})}}init(){if(this.inIframe()){this.logger.debug("Not inserting previewr in iframe: ",window.location.href);return}this.listenForCspError(),this.listenForWindowMessages()}listenForCspError(){document.addEventListener("securitypolicyviolation",e=>{window.name===xn&&this.logger.error("CSP error",e,e.blockedURI)})}listenForWindowMessages(){window.addEventListener("message",this.onMessageHandler,!1),document.onkeydown=this.onEscHandler,document.onscroll=this.onEscHandler,document.onresize=this.onEscHandler}async handleMessage(e){switch(this.logger.debug("#handleMessage: ",e),e.action){case"define":case"verbose-define":try{let n=new URL(this.engineConfig.url(e.data));if(n.href===this.url?.href){this.logger.warn("Ignoring update of same URL",n.href);return}this.url=n,this.dialog&&this.dialog.startLoading(),this.previewUrl(n,e.point);return}catch(n){this.logger.log("Error creating url: ",n)}break;case"loaded-and-cleaned":this.dialog?.show(),this.dialog?.stopLoading();break;case"loaded-and-no-def":this.dialog?.close();break;case"unload":this.dialog?.startLoading();break;case"escape":this.dialog?.close();break;default:this.logger.warn("Unhandled action: ",e.action);break}}async previewUrl(e,n){this.logger.log("#previewUrl: ",e);let r=await this.getWinboxOptions(e,n);this.dialog?(this.logger.debug("restoring dialog"),this.dialog.setUrl(e.href),this.dialog.move(r.x,r.y,!1)):(this.logger.debug("creating new dialog with options",r),this.dialog=new oe(chrome.i18n.getMessage("appName"),r))}async getWinboxOptions(e,n){let r={x:0,y:0,placement:"top"};return n&&(r=await this.getPos(n)),{icon:chrome.runtime.getURL("assets/logo-24x24.png"),x:r.x,y:r.y,width:"410px",height:"400px",autosize:!1,class:["no-max","no-full","no-min","no-resize","no-move"],index:await this.getMaxZIndex(),html:`<iframe name="${xn}" src="${e}"></iframe><div class="loading"><span class="bar-animation"></span></div> `,hidden:!0,shadowel:"dictionary-preview-window",cssurl:chrome.runtime.getURL("content-script/winbox.css"),framename:xn,onclose:()=>{this.url=void 0,this.dialog=void 0,document.querySelectorAll("dictionary-preview-window")?.forEach(i=>i.remove())}}}inIframe(){try{return window.self!==window.top}catch{return!0}}getMaxZIndex(){return new Promise(e=>{let n=Math.max(...Array.from(document.querySelectorAll("body *"),r=>parseFloat(window.getComputedStyle(r).zIndex)).filter(r=>!Number.isNaN(r)),0);e(n)})}async getPos(e){let n={getBoundingClientRect(){return e}},r=document.createElement("div");return r.style.width="410px",r.style.height="400px",r.style.position="fixed",r.style.visibility="hidden",document.body.appendChild(r),co(n,r,{placement:"top",strategy:"fixed",middleware:[br(12),Er(),xr({padding:5})]}).then(({x:i,y:o,placement:s,middlewareData:a})=>({x:i,y:o,placement:s}))}};new Tr().init();var Rr=class{constructor(){this.iframeName=Be.__package_name__+"/mainframe";this.logger=new je("iframe-helper");this.config=bn()}registerListeners(){!this.inIframe()||this.getFrameName()===this.iframeName&&(window.addEventListener("load",()=>{this.focusDictUi()}),window.addEventListener("unload",()=>{this.sendMessage({action:"unload",href:document.location.href,sourceFrame:this.getFrameName()})}),document.onkeydown=e=>{e=e||window.event;var n=!1;"key"in e?n=e.key==="Escape"||e.key==="Esc":n=e.keyCode===27,n&&this.sendMessage({action:"escape",href:document.location.href,sourceFrame:this.getFrameName()})})}inIframe(){try{return window.self!==window.top}catch{return!0}}getFrameName(){return window.name}getLinkTarget(e){var n=e.target;do if(n.nodeName.toUpperCase()==="A"&&n.href)return n;while(n=n.parentElement);return null}sendMessage(e){this.logger.debug("#sendMessage",e),chrome.runtime.sendMessage({application:"dictionary",...e})}hideAllExcept(e){if(!e)return;let n=e.nextElementSibling;for(;n;){let i=n.nextElementSibling;n.style&&(n.style.display="none"),n=i}let r=e.previousElementSibling;for(;r;){let i=r.previousElementSibling;r.style&&(r.style.display="none"),r=i}e.tagName!=="BODY"&&this.hideAllExcept(e.parentElement)}focusDictUi(){let e=document.querySelectorAll(this.config.selector);if(e.length==0){this.logger.error("No match for selector, ",this.config.selector),this.sendMessage({action:"loaded-and-no-def",href:document.location.href,sourceFrame:this.getFrameName()});return}this.config.applyCss(),this.hideAllExcept(e[0]),this.sendMessage({action:"loaded-and-cleaned",href:document.location.href,sourceFrame:this.getFrameName()})}},Ma=new Rr;Ma.registerListeners();var Nr=class{constructor(){this.logger=new je("content-script")}start(){document.onmouseup=e=>this.deferredMaybeShow(e),document.onmousemove=e=>{let n=e.y<20?20:e.y;this.lastMousePosition={width:10,height:10,x:e.x,y:n,left:e.x,top:n,right:e.x+10,bottom:n+10}},chrome.runtime.onMessage.addListener((e,n,r)=>{this.logger.debug("Re-posting message for DOM: ",e),e.point||(e.point=this.lastMousePosition),e.action==="verbose-define"&&window.getSelection()?.removeAllRanges(),this.sendMessage(e.action,e.data,e.point),r("ok")})}deferredMaybeShow(e){this.showTimeout=window.setTimeout(()=>this.maybeShow(e),0)}maybeShow(e){if(typeof window.getSelection>"u")return;let n=window.getSelection();if(n.isCollapsed)return;let r=n.toString().trim(),o=n.getRangeAt(0).getBoundingClientRect();this.logger.debug("Selected: ",r),this.shouldDefine(e,r)&&this.sendMessage("define",r,o)}shouldDefine(e,n){let r=u=>u.length>0&&u.length<100,i=u=>String(u).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),o=u=>new RegExp("^(?:[a-z+]+:)?//","i").test(u),s=u=>!isNaN(Date.parse(u)),a=u=>/[a-zA-Z]/.test(u),c=u=>!1;return r(n)&&a(n)&&!i(n)&&!s(n)&&!o(n)&&!c(n)}sendMessage(e,n,r){let i={application:"dictionary",action:e,data:n,point:r};this.logger.debug("Sending message: ",i),window.postMessage(i,window.location.origin)}};new Nr().start();})();
